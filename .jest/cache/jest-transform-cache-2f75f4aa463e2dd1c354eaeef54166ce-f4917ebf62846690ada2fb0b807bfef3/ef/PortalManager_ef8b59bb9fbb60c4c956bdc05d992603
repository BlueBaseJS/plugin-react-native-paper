94973e6e04a8502e969da49bd00159ad
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var PortalManager = function (_React$PureComponent) {
  (0, _inherits2.default)(PortalManager, _React$PureComponent);

  function PortalManager() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2.default)(this, PortalManager);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(PortalManager)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "state", {
      portals: []
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "mount", function (key, children) {
      _this.setState(function (state) {
        return {
          portals: [].concat((0, _toConsumableArray2.default)(state.portals), [{
            key: key,
            children: children
          }])
        };
      });
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "update", function (key, children) {
      return _this.setState(function (state) {
        return {
          portals: state.portals.map(function (item) {
            if (item.key === key) {
              return (0, _objectSpread2.default)({}, item, {
                children: children
              });
            }

            return item;
          })
        };
      });
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "unmount", function (key) {
      return _this.setState(function (state) {
        return {
          portals: state.portals.filter(function (item) {
            return item.key !== key;
          })
        };
      });
    });
    return _this;
  }

  (0, _createClass2.default)(PortalManager, [{
    key: "render",
    value: function render() {
      return this.state.portals.map(function (_ref) {
        var key = _ref.key,
            children = _ref.children;
        return React.createElement(_reactNative.View, {
          key: key,
          collapsable: false,
          pointerEvents: "box-none",
          style: _reactNative.StyleSheet.absoluteFill
        }, children);
      });
    }
  }]);
  return PortalManager;
}(React.PureComponent);

exports.default = PortalManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBvcnRhbE1hbmFnZXIuanMiXSwibmFtZXMiOlsiUG9ydGFsTWFuYWdlciIsInBvcnRhbHMiLCJrZXkiLCJjaGlsZHJlbiIsInNldFN0YXRlIiwic3RhdGUiLCJtYXAiLCJpdGVtIiwiZmlsdGVyIiwiU3R5bGVTaGVldCIsImFic29sdXRlRmlsbCIsIlJlYWN0IiwiUHVyZUNvbXBvbmVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7O0FBQ0E7O0lBWXFCQSxhOzs7Ozs7Ozs7Ozs7Ozs7d0ZBQ0o7QUFDYkMsTUFBQUEsT0FBTyxFQUFFO0FBREksSzt3RkFJUCxVQUFDQyxHQUFELEVBQWNDLFFBQWQsRUFBdUM7QUFDN0MsWUFBS0MsUUFBTCxDQUFjLFVBQUFDLEtBQUs7QUFBQSxlQUFLO0FBQ3RCSixVQUFBQSxPQUFPLDZDQUFNSSxLQUFLLENBQUNKLE9BQVosSUFBcUI7QUFBRUMsWUFBQUEsR0FBRyxFQUFIQSxHQUFGO0FBQU9DLFlBQUFBLFFBQVEsRUFBUkE7QUFBUCxXQUFyQjtBQURlLFNBQUw7QUFBQSxPQUFuQjtBQUdELEs7eUZBRVEsVUFBQ0QsR0FBRCxFQUFjQyxRQUFkO0FBQUEsYUFDUCxNQUFLQyxRQUFMLENBQWMsVUFBQUMsS0FBSztBQUFBLGVBQUs7QUFDdEJKLFVBQUFBLE9BQU8sRUFBRUksS0FBSyxDQUFDSixPQUFOLENBQWNLLEdBQWQsQ0FBa0IsVUFBQUMsSUFBSSxFQUFJO0FBQ2pDLGdCQUFJQSxJQUFJLENBQUNMLEdBQUwsS0FBYUEsR0FBakIsRUFBc0I7QUFDcEIscURBQVlLLElBQVo7QUFBa0JKLGdCQUFBQSxRQUFRLEVBQVJBO0FBQWxCO0FBQ0Q7O0FBQ0QsbUJBQU9JLElBQVA7QUFDRCxXQUxRO0FBRGEsU0FBTDtBQUFBLE9BQW5CLENBRE87QUFBQSxLOzBGQVVDLFVBQUNMLEdBQUQ7QUFBQSxhQUNSLE1BQUtFLFFBQUwsQ0FBYyxVQUFBQyxLQUFLO0FBQUEsZUFBSztBQUN0QkosVUFBQUEsT0FBTyxFQUFFSSxLQUFLLENBQUNKLE9BQU4sQ0FBY08sTUFBZCxDQUFxQixVQUFBRCxJQUFJO0FBQUEsbUJBQUlBLElBQUksQ0FBQ0wsR0FBTCxLQUFhQSxHQUFqQjtBQUFBLFdBQXpCO0FBRGEsU0FBTDtBQUFBLE9BQW5CLENBRFE7QUFBQSxLOzs7Ozs7NkJBS0Q7QUFDUCxhQUFPLEtBQUtHLEtBQUwsQ0FBV0osT0FBWCxDQUFtQkssR0FBbkIsQ0FBdUI7QUFBQSxZQUFHSixHQUFILFFBQUdBLEdBQUg7QUFBQSxZQUFRQyxRQUFSLFFBQVFBLFFBQVI7QUFBQSxlQUM1QixvQkFBQyxpQkFBRDtBQUNFLFVBQUEsR0FBRyxFQUFFRCxHQURQO0FBRUUsVUFBQSxXQUFXLEVBQ1QsS0FISjtBQUtFLFVBQUEsYUFBYSxFQUFDLFVBTGhCO0FBTUUsVUFBQSxLQUFLLEVBQUVPLHdCQUFXQztBQU5wQixXQVFHUCxRQVJILENBRDRCO0FBQUEsT0FBdkIsQ0FBUDtBQVlEOzs7RUF2Q3dDUSxLQUFLLENBQUNDLGEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBWaWV3LCBTdHlsZVNoZWV0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcblxudHlwZSBTdGF0ZSA9IHtcbiAgcG9ydGFsczogQXJyYXk8e1xuICAgIGtleTogbnVtYmVyLFxuICAgIGNoaWxkcmVuOiBSZWFjdC5Ob2RlLFxuICB9Pixcbn07XG5cbi8qKlxuICogUG9ydGFsIGhvc3QgaXMgdGhlIGNvbXBvbmVudCB3aGljaCBhY3R1YWxseSByZW5kZXJzIGFsbCBQb3J0YWxzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3J0YWxNYW5hZ2VyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDx7fSwgU3RhdGU+IHtcbiAgc3RhdGU6IFN0YXRlID0ge1xuICAgIHBvcnRhbHM6IFtdLFxuICB9O1xuXG4gIG1vdW50ID0gKGtleTogbnVtYmVyLCBjaGlsZHJlbjogUmVhY3QuTm9kZSkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgIHBvcnRhbHM6IFsuLi5zdGF0ZS5wb3J0YWxzLCB7IGtleSwgY2hpbGRyZW4gfV0sXG4gICAgfSkpO1xuICB9O1xuXG4gIHVwZGF0ZSA9IChrZXk6IG51bWJlciwgY2hpbGRyZW46IFJlYWN0Lk5vZGUpID0+XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgcG9ydGFsczogc3RhdGUucG9ydGFscy5tYXAoaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtLmtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgcmV0dXJuIHsgLi4uaXRlbSwgY2hpbGRyZW4gfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH0pLFxuICAgIH0pKTtcblxuICB1bm1vdW50ID0gKGtleTogbnVtYmVyKSA9PlxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgIHBvcnRhbHM6IHN0YXRlLnBvcnRhbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5rZXkgIT09IGtleSksXG4gICAgfSkpO1xuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5wb3J0YWxzLm1hcCgoeyBrZXksIGNoaWxkcmVuIH0pID0+IChcbiAgICAgIDxWaWV3XG4gICAgICAgIGtleT17a2V5fVxuICAgICAgICBjb2xsYXBzYWJsZT17XG4gICAgICAgICAgZmFsc2UgLyogTmVlZCBjb2xsYXBzYWJsZT1mYWxzZSBoZXJlIHRvIGNsaXAgdGhlIGVsZXZhdGlvbnMsIG90aGVyd2lzZSB0aGV5IGFwcGVhciBhYm92ZSBzaWJsaW5nIGNvbXBvbmVudHMgKi9cbiAgICAgICAgfVxuICAgICAgICBwb2ludGVyRXZlbnRzPVwiYm94LW5vbmVcIlxuICAgICAgICBzdHlsZT17U3R5bGVTaGVldC5hYnNvbHV0ZUZpbGx9XG4gICAgICA+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvVmlldz5cbiAgICApKTtcbiAgfVxufVxuIl19