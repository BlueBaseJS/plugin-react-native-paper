fa5f205ae5bd08ca38ad4e68bbafb977
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _reactLifecyclesCompat = require("react-lifecycles-compat");

var _color = _interopRequireDefault(require("color"));

var _FAB = _interopRequireDefault(require("./FAB"));

var _Text = _interopRequireDefault(require("../Typography/Text"));

var _Card = _interopRequireDefault(require("../Card/Card"));

var _theming = require("../../core/theming");

var FABGroup = function (_React$Component) {
  (0, _inherits2.default)(FABGroup, _React$Component);

  function FABGroup() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2.default)(this, FABGroup);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(FABGroup)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "state", {
      backdrop: new _reactNative.Animated.Value(0),
      animations: []
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_close", function () {
      return _this.props.onStateChange({
        open: false
      });
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_toggle", function () {
      return _this.props.onStateChange({
        open: !_this.props.open
      });
    });
    return _this;
  }

  (0, _createClass2.default)(FABGroup, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (this.props.open === prevProps.open) {
        return;
      }

      if (this.props.open) {
        _reactNative.Animated.parallel([_reactNative.Animated.timing(this.state.backdrop, {
          toValue: 1,
          duration: 250,
          useNativeDriver: true
        }), _reactNative.Animated.stagger(50, this.state.animations.map(function (animation) {
          return _reactNative.Animated.timing(animation, {
            toValue: 1,
            duration: 150,
            useNativeDriver: true
          });
        }).reverse())]).start();
      } else {
        _reactNative.Animated.parallel([_reactNative.Animated.timing(this.state.backdrop, {
          toValue: 0,
          duration: 200,
          useNativeDriver: true
        })].concat((0, _toConsumableArray2.default)(this.state.animations.map(function (animation) {
          return _reactNative.Animated.timing(animation, {
            toValue: 0,
            duration: 150,
            useNativeDriver: true
          });
        })))).start();
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          actions = _this$props.actions,
          icon = _this$props.icon,
          open = _this$props.open,
          _onPress = _this$props.onPress,
          accessibilityLabel = _this$props.accessibilityLabel,
          theme = _this$props.theme,
          style = _this$props.style,
          fabStyle = _this$props.fabStyle,
          visible = _this$props.visible;
      var colors = theme.colors;
      var labelColor = theme.dark ? colors.text : (0, _color.default)(colors.text).fade(0.54).rgb().string();
      var backdropOpacity = open ? this.state.backdrop.interpolate({
        inputRange: [0, 0.5, 1],
        outputRange: [0, 1, 1]
      }) : this.state.backdrop;
      var opacities = this.state.animations;
      var scales = opacities.map(function (opacity) {
        return open ? opacity.interpolate({
          inputRange: [0, 1],
          outputRange: [0.8, 1]
        }) : 1;
      });
      return React.createElement(_reactNative.View, {
        pointerEvents: "box-none",
        style: [styles.container, style]
      }, open ? React.createElement(_reactNative.StatusBar, {
        barStyle: "light-content"
      }) : null, React.createElement(_reactNative.TouchableWithoutFeedback, {
        onPress: this._close
      }, React.createElement(_reactNative.Animated.View, {
        pointerEvents: open ? 'auto' : 'none',
        style: [styles.backdrop, {
          opacity: backdropOpacity,
          backgroundColor: colors.backdrop
        }]
      })), React.createElement(_reactNative.SafeAreaView, {
        pointerEvents: "box-none",
        style: styles.safeArea
      }, React.createElement(_reactNative.View, {
        pointerEvents: open ? 'box-none' : 'none'
      }, actions.map(function (it, i) {
        return React.createElement(_reactNative.View, {
          key: i,
          style: styles.item,
          pointerEvents: "box-none"
        }, it.label && React.createElement(_Card.default, {
          style: [styles.label, {
            transform: [{
              scale: scales[i]
            }],
            opacity: opacities[i]
          }],
          onPress: function onPress() {
            it.onPress();

            _this2._close();
          },
          accessibilityLabel: it.accessibilityLabel !== 'undefined' ? it.accessibilityLabel : it.label,
          accessibilityTraits: "button",
          accessibilityComponentType: "button",
          accessibilityRole: "button"
        }, React.createElement(_Text.default, {
          style: {
            color: labelColor
          }
        }, it.label)), React.createElement(_FAB.default, {
          small: true,
          icon: it.icon,
          color: it.color,
          style: [{
            transform: [{
              scale: scales[i]
            }],
            opacity: opacities[i],
            backgroundColor: theme.colors.surface
          }, it.style],
          onPress: function onPress() {
            it.onPress();

            _this2._close();
          },
          accessibilityLabel: typeof it.accessibilityLabel !== 'undefined' ? it.accessibilityLabel : it.label,
          accessibilityTraits: "button",
          accessibilityComponentType: "button",
          accessibilityRole: "button"
        }));
      })), React.createElement(_FAB.default, {
        onPress: function onPress() {
          _onPress && _onPress();

          _this2._toggle();
        },
        icon: icon,
        color: this.props.color,
        accessibilityLabel: accessibilityLabel,
        accessibilityTraits: "button",
        accessibilityComponentType: "button",
        accessibilityRole: "button",
        style: [styles.fab, fabStyle],
        visible: visible
      })));
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(nextProps, prevState) {
      return {
        animations: nextProps.actions.map(function (_, i) {
          return prevState.animations[i] || new _reactNative.Animated.Value(nextProps.open ? 1 : 0);
        })
      };
    }
  }]);
  return FABGroup;
}(React.Component);

(0, _defineProperty2.default)(FABGroup, "displayName", 'FAB.Group');
(0, _reactLifecyclesCompat.polyfill)(FABGroup);

var _default = (0, _theming.withTheme)(FABGroup);

exports.default = _default;

var styles = _reactNative.StyleSheet.create({
  safeArea: {
    alignItems: 'flex-end'
  },
  container: (0, _objectSpread2.default)({}, _reactNative.StyleSheet.absoluteFillObject, {
    justifyContent: 'flex-end'
  }),
  fab: {
    marginHorizontal: 16,
    marginBottom: 16,
    marginTop: 0
  },
  backdrop: (0, _objectSpread2.default)({}, _reactNative.StyleSheet.absoluteFillObject),
  label: {
    borderRadius: 5,
    paddingHorizontal: 12,
    paddingVertical: 6,
    marginVertical: 8,
    marginHorizontal: 16,
    elevation: 2
  },
  item: {
    marginHorizontal: 24,
    marginBottom: 16,
    flexDirection: 'row',
    justifyContent: 'flex-end',
    alignItems: 'center'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZBQkdyb3VwLmpzIl0sIm5hbWVzIjpbIkZBQkdyb3VwIiwiYmFja2Ryb3AiLCJBbmltYXRlZCIsIlZhbHVlIiwiYW5pbWF0aW9ucyIsInByb3BzIiwib25TdGF0ZUNoYW5nZSIsIm9wZW4iLCJwcmV2UHJvcHMiLCJwYXJhbGxlbCIsInRpbWluZyIsInN0YXRlIiwidG9WYWx1ZSIsImR1cmF0aW9uIiwidXNlTmF0aXZlRHJpdmVyIiwic3RhZ2dlciIsIm1hcCIsImFuaW1hdGlvbiIsInJldmVyc2UiLCJzdGFydCIsImFjdGlvbnMiLCJpY29uIiwib25QcmVzcyIsImFjY2Vzc2liaWxpdHlMYWJlbCIsInRoZW1lIiwic3R5bGUiLCJmYWJTdHlsZSIsInZpc2libGUiLCJjb2xvcnMiLCJsYWJlbENvbG9yIiwiZGFyayIsInRleHQiLCJmYWRlIiwicmdiIiwic3RyaW5nIiwiYmFja2Ryb3BPcGFjaXR5IiwiaW50ZXJwb2xhdGUiLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJvcGFjaXRpZXMiLCJzY2FsZXMiLCJvcGFjaXR5Iiwic3R5bGVzIiwiY29udGFpbmVyIiwiX2Nsb3NlIiwiYmFja2dyb3VuZENvbG9yIiwic2FmZUFyZWEiLCJpdCIsImkiLCJpdGVtIiwibGFiZWwiLCJ0cmFuc2Zvcm0iLCJzY2FsZSIsImNvbG9yIiwic3VyZmFjZSIsIl90b2dnbGUiLCJmYWIiLCJuZXh0UHJvcHMiLCJwcmV2U3RhdGUiLCJfIiwiUmVhY3QiLCJDb21wb25lbnQiLCJTdHlsZVNoZWV0IiwiY3JlYXRlIiwiYWxpZ25JdGVtcyIsImFic29sdXRlRmlsbE9iamVjdCIsImp1c3RpZnlDb250ZW50IiwibWFyZ2luSG9yaXpvbnRhbCIsIm1hcmdpbkJvdHRvbSIsIm1hcmdpblRvcCIsImJvcmRlclJhZGl1cyIsInBhZGRpbmdIb3Jpem9udGFsIiwicGFkZGluZ1ZlcnRpY2FsIiwibWFyZ2luVmVydGljYWwiLCJlbGV2YXRpb24iLCJmbGV4RGlyZWN0aW9uIl0sIm1hcHBp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QkFBZ0IsRUFBRSxFQURmO0FBRUhDLElBQUFBLFlBQVksRUFBRSxFQUZYO0FBR0hDLElBQUFBLFNBQVMsRUFBRTtBQUhSLEdBUjBCO0FBYS9CcEUsRUFBQUEsUUFBUSxrQ0FDSDZELHdCQUFXRyxrQkFEUixDQWJ1QjtBQWdCL0JmLEVBQUFBLEtBQUssRUFBRTtBQUNMb0IsSUFBQUEsWUFBWSxFQUFFLENBRFQ7QUFFTEMsSUFBQUEsaUJBQWlCLEVBQUUsRUFGZDtBQUdMQyxJQUFBQSxlQUFlLEVBQUUsQ0FIWjtBQUlMQyxJQUFBQSxjQUFjLEVBQUUsQ0FKWDtBQUtMTixJQUFBQSxnQkFBZ0IsRUFBRSxFQUxiO0FBTUxPLElBQUFBLFNBQVMsRUFBRTtBQU5OLEdBaEJ3QjtBQXdCL0J6QixFQUFBQSxJQUFJLEVBQUU7QUFDSmtCLElBQUFBLGdCQUFnQixFQUFFLEVBRGQ7QUFFSkMsSUFBQUEsWUFBWSxFQUFFLEVBRlY7QUFHSk8sSUFBQUEsYUFBYSxFQUFFLEtBSFg7QUFJSlQsSUFBQUEsY0FBYyxFQUFFLFVBSlo7QUFLSkYsSUFBQUEsVUFBVSxFQUFFO0FBTFI7QUF4QnlCLENBQWxCLENBQWYiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBWaWV3LFxuICBTdHlsZVNoZWV0LFxuICBBbmltYXRlZCxcbiAgVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrLFxuICBTdGF0dXNCYXIsXG4gIFNhZmVBcmVhVmlldyxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCB7IHBvbHlmaWxsIH0gZnJvbSAncmVhY3QtbGlmZWN5Y2xlcy1jb21wYXQnO1xuaW1wb3J0IGNvbG9yIGZyb20gJ2NvbG9yJztcbmltcG9ydCBGQUIgZnJvbSAnLi9GQUInO1xuaW1wb3J0IFRleHQgZnJvbSAnLi4vVHlwb2dyYXBoeS9UZXh0JztcbmltcG9ydCBDYXJkIGZyb20gJy4uL0NhcmQvQ2FyZCc7XG5pbXBvcnQgeyB3aXRoVGhlbWUgfSBmcm9tICcuLi8uLi9jb3JlL3RoZW1pbmcnO1xuaW1wb3J0IHR5cGUgeyBUaGVtZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB0eXBlIHsgSWNvblNvdXJjZSB9IGZyb20gJy4uL0ljb24nO1xuXG50eXBlIFByb3BzID0ge3xcbiAgLyoqXG4gICAqIEFjdGlvbiBpdGVtcyB0byBkaXNwbGF5IGluIHRoZSBmb3JtIG9mIGEgc3BlZWQgZGlhbC5cbiAgICogQW4gYWN0aW9uIGl0ZW0gc2hvdWxkIGNvbnRhaW4gdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgKiAtIGBpY29uYDogaWNvbiB0byBkaXNwbGF5IChyZXF1aXJlZClcbiAgICogLSBgbGFiZWxgOiBvcHRpb25hbCBsYWJlbCB0ZXh0XG4gICAqIC0gYGFjY2Vzc2liaWxpdHlMYWJlbGA6IGFjY2Vzc2liaWxpdHkgbGFiZWwgZm9yIHRoZSBhY3Rpb24sIHVzZXMgbGFiZWwgYnkgZGVmYXVsdCBpZiBzcGVjaWZpZWRcbiAgICogLSBgY29sb3JgOiBjdXN0b20gaWNvbiBjb2xvciBvZiB0aGUgYWN0aW9uIGl0ZW1cbiAgICogLSBgc3R5bGVgOiBwYXNzIGFkZGl0aW9uYWwgc3R5bGVzIGZvciB0aGUgZmFiIGl0ZW0sIGZvciBleGFtcGxlLCBgYmFja2dyb3VuZENvbG9yYFxuICAgKiAtIGBvblByZXNzYDogY2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiBgRkFCYCBpcyBwcmVzc2VkIChyZXF1aXJlZClcbiAgICovXG4gIGFjdGlvbnM6IEFycmF5PHtcbiAgICBpY29uOiBzdHJpbmcsXG4gICAgbGFiZWw/OiBzdHJpbmcsXG4gICAgY29sb3I/OiBzdHJpbmcsXG4gICAgYWNjZXNzaWJpbGl0eUxhYmVsPzogc3RyaW5nLFxuICAgIHN0eWxlPzogYW55LFxuICAgIG9uUHJlc3M6ICgpID0+IG1peGVkLFxuICB9PixcbiAgLyoqXG4gICAqIEljb24gdG8gZGlzcGxheSBmb3IgdGhlIGBGQUJgLlxuICAgKiBZb3UgY2FuIHRvZ2dsZSBpdCBiYXNlZCBvbiB3aGV0aGVyIHRoZSBzcGVlZCBkaWFsIGlzIG9wZW4gdG8gZGlzcGxheSBhIGRpZmZlcmVudCBpY29uLlxuICAgKi9cbiAgaWNvbjogSWNvblNvdXJjZSxcbiAgLyoqXG4gICAqIEFjY2Vzc2liaWxpdHkgbGFiZWwgZm9yIHRoZSBGQUIuIFRoaXMgaXMgcmVhZCBieSB0aGUgc2NyZWVuIHJlYWRlciB3aGVuIHRoZSB1c2VyIHRhcHMgdGhlIEZBQi5cbiAgICovXG4gIGFjY2Vzc2liaWxpdHlMYWJlbD86IHN0cmluZyxcbiAgLyoqXG4gICAqIEN1c3RvbSBjb2xvciBmb3IgdGhlIGBGQUJgLlxuICAgKi9cbiAgY29sb3I/OiBzdHJpbmcsXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIG9uIHByZXNzaW5nIHRoZSBgRkFCYC5cbiAgICovXG4gIG9uUHJlc3M/OiAoKSA9PiBtaXhlZCxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNwZWVkIGRpYWwgaXMgb3Blbi5cbiAgICovXG4gIG9wZW46IGJvb2xlYW4sXG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgb24gb3BlbmluZyBhbmQgY2xvc2luZyB0aGUgc3BlZWQgZGlhbC5cbiAgICogVGhlIG9wZW4gc3RhdGUgbmVlZHMgdG8gYmUgdXBkYXRlZCB3aGVuIGl0J3MgY2FsbGVkLCBvdGhlcndpc2UgdGhlIGNoYW5nZSBpcyBkcm9wcGVkLlxuICAgKi9cbiAgb25TdGF0ZUNoYW5nZTogKHN0YXRlOiB7IG9wZW46IGJvb2xlYW4gfSkgPT4gbWl4ZWQsXG4gIC8qKlxuICAgKiBXaGV0aGVyIGBGQUJgIGlzIGN1cnJlbnRseSB2aXNpYmxlLlxuICAgKi9cbiAgdmlzaWJsZTogYm9vbGVhbixcbiAgLyoqXG4gICAqIFN0eWxlIGZvciB0aGUgZ3JvdXAuIFlvdSBjYW4gdXNlIGl0IHRvIHBhc3MgYWRkaXRpb25hbCBzdHlsZXMgaWYgeW91IG5lZWQuXG4gICAqIEZvciBleGFtcGxlLCB5b3UgY2FuIHNldCBhbiBhZGRpdGlvbmFsIHBhZGRpbmcgaWYgeW91IGhhdmUgYSB0YWIgYmFyIGF0IHRoZSBib3R0b20uXG4gICAqL1xuICBzdHlsZT86IGFueSxcbiAgLyoqXG4gICAqIFN0eWxlIGZvciB0aGUgRkFCLiBJdCBhbGxvd3MgdG8gcGFzcyB0aGUgRkFCIGJ1dHRvbiBzdHlsZXMsIHN1Y2ggYXMgYmFja2dyb3VuZENvbG9yLlxuICAgKi9cbiAgZmFiU3R5bGU/OiBhbnksXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHRoZW1lOiBUaGVtZSxcbnx9O1xuXG50eXBlIFN0YXRlID0ge1xuICBiYWNrZHJvcDogQW5pbWF0ZWQuVmFsdWUsXG4gIGFuaW1hdGlvbnM6IEFuaW1hdGVkLlZhbHVlW10sXG59O1xuXG4vKipcbiAqIEEgY29tcG9uZW50IHRvIGRpc3BsYXkgYSBzdGFjayBvZiBGQUJzIHdpdGggcmVsYXRlZCBhY3Rpb25zIGluIGEgc3BlZWQgZGlhbC5cbiAqIFRvIHJlbmRlciB0aGUgZ3JvdXAgYWJvdmUgb3RoZXIgY29tcG9uZW50cywgeW91J2xsIG5lZWQgdG8gd3JhcCBpdCB3aXRoIHRoZSBbYFBvcnRhbGBdKHBvcnRhbC5odG1sKSBjb21wb25lbnQuXG4gKlxuICogPGRpdiBjbGFzcz1cInNjcmVlbnNob3RzXCI+XG4gKiAgIDxpbWcgc3JjPVwic2NyZWVuc2hvdHMvZmFiLWdyb3VwLnBuZ1wiIC8+XG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBVc2FnZVxuICogYGBganNcbiAqIGltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbiAqIGltcG9ydCB7IEZBQiwgUG9ydGFsIH0gZnJvbSAncmVhY3QtbmF0aXZlLXBhcGVyJztcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gKiAgIHN0YXRlID0ge1xuICogICAgIG9wZW46IGZhbHNlLFxuICogICB9O1xuICpcbiAqICAgcmVuZGVyKCkge1xuICogICAgIHJldHVybiAoXG4gKiAgICAgICA8UG9ydGFsPlxuICogICAgICAgICA8RkFCLkdyb3VwXG4gKiAgICAgICAgICAgb3Blbj17dGhpcy5zdGF0ZS5vcGVufVxuICogICAgICAgICAgIGljb249e3RoaXMuc3RhdGUub3BlbiA/ICd0b2RheScgOiAnYWRkJ31cbiAqICAgICAgICAgICBhY3Rpb25zPXtbXG4gKiAgICAgICAgICAgICB7IGljb246ICdhZGQnLCBvblByZXNzOiAoKSA9PiBjb25zb2xlLmxvZygnUHJlc3NlZCBhZGQnKSB9LFxuICogICAgICAgICAgICAgeyBpY29uOiAnc3RhcicsIGxhYmVsOiAnU3RhcicsIG9uUHJlc3M6ICgpID0+IGNvbnNvbGUubG9nKCdQcmVzc2VkIHN0YXInKX0sXG4gKiAgICAgICAgICAgICB7IGljb246ICdlbWFpbCcsIGxhYmVsOiAnRW1haWwnLCBvblByZXNzOiAoKSA9PiBjb25zb2xlLmxvZygnUHJlc3NlZCBlbWFpbCcpIH0sXG4gKiAgICAgICAgICAgICB7IGljb246ICdub3RpZmljYXRpb25zJywgbGFiZWw6ICdSZW1pbmQnLCBvblByZXNzOiAoKSA9PiBjb25zb2xlLmxvZygnUHJlc3NlZCBub3RpZmljYXRpb25zJykgfSxcbiAqICAgICAgICAgICBdfVxuICogICAgICAgICAgIG9uU3RhdGVDaGFuZ2U9eyh7IG9wZW4gfSkgPT4gdGhpcy5zZXRTdGF0ZSh7IG9wZW4gfSl9XG4gKiAgICAgICAgICAgb25QcmVzcz17KCkgPT4ge1xuICogICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUub3Blbikge1xuICogICAgICAgICAgICAgICAvLyBkbyBzb21ldGhpbmcgaWYgdGhlIHNwZWVkIGRpYWwgaXMgb3BlblxuICogICAgICAgICAgICAgfVxuICogICAgICAgICAgIH19XG4gKiAgICAgICAgIC8+XG4gKiAgICAgICA8L1BvcnRhbD5cbiAqICAgICApO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuY2xhc3MgRkFCR3JvdXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHN0YXRpYyBkaXNwbGF5TmFtZSA9ICdGQUIuR3JvdXAnO1xuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYW5pbWF0aW9uczogbmV4dFByb3BzLmFjdGlvbnMubWFwKFxuICAgICAgICAoXywgaSkgPT5cbiAgICAgICAgICBwcmV2U3RhdGUuYW5pbWF0aW9uc1tpXSB8fCBuZXcgQW5pbWF0ZWQuVmFsdWUobmV4dFByb3BzLm9wZW4gPyAxIDogMClcbiAgICAgICksXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRlID0ge1xuICAgIGJhY2tkcm9wOiBuZXcgQW5pbWF0ZWQuVmFsdWUoMCksXG4gICAgYW5pbWF0aW9uczogW10sXG4gIH07XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgIGlmICh0aGlzLnByb3BzLm9wZW4gPT09IHByZXZQcm9wcy5vcGVuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMub3Blbikge1xuICAgICAgQW5pbWF0ZWQucGFyYWxsZWwoW1xuICAgICAgICBBbmltYXRlZC50aW1pbmcodGhpcy5zdGF0ZS5iYWNrZHJvcCwge1xuICAgICAgICAgIHRvVmFsdWU6IDEsXG4gICAgICAgICAgZHVyYXRpb246IDI1MCxcbiAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICAgIH0pLFxuICAgICAgICBBbmltYXRlZC5zdGFnZ2VyKFxuICAgICAgICAgIDUwLFxuICAgICAgICAgIHRoaXMuc3RhdGUuYW5pbWF0aW9uc1xuICAgICAgICAgICAgLm1hcChhbmltYXRpb24gPT5cbiAgICAgICAgICAgICAgQW5pbWF0ZWQudGltaW5nKGFuaW1hdGlvbiwge1xuICAgICAgICAgICAgICAgIHRvVmFsdWU6IDEsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MCxcbiAgICAgICAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAucmV2ZXJzZSgpXG4gICAgICAgICksXG4gICAgICBdKS5zdGFydCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBBbmltYXRlZC5wYXJhbGxlbChbXG4gICAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLmJhY2tkcm9wLCB7XG4gICAgICAgICAgdG9WYWx1ZTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgIHVzZU5hdGl2ZURyaXZlcjogdHJ1ZSxcbiAgICAgICAgfSksXG4gICAgICAgIC4uLnRoaXMuc3RhdGUuYW5pbWF0aW9ucy5tYXAoYW5pbWF0aW9uID0+XG4gICAgICAgICAgQW5pbWF0ZWQudGltaW5nKGFuaW1hdGlvbiwge1xuICAgICAgICAgICAgdG9WYWx1ZTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAsXG4gICAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICAgICAgfSlcbiAgICAgICAgKSxcbiAgICAgIF0pLnN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbiAgX2Nsb3NlID0gKCkgPT4gdGhpcy5wcm9wcy5vblN0YXRlQ2hhbmdlKHsgb3BlbjogZmFsc2UgfSk7XG5cbiAgX3RvZ2dsZSA9ICgpID0+IHRoaXMucHJvcHMub25TdGF0ZUNoYW5nZSh7IG9wZW46ICF0aGlzLnByb3BzLm9wZW4gfSk7XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGFjdGlvbnMsXG4gICAgICBpY29uLFxuICAgICAgb3BlbixcbiAgICAgIG9uUHJlc3MsXG4gICAgICBhY2Nlc3NpYmlsaXR5TGFiZWwsXG4gICAgICB0aGVtZSxcbiAgICAgIHN0eWxlLFxuICAgICAgZmFiU3R5bGUsXG4gICAgICB2aXNpYmxlLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgY29sb3JzIH0gPSB0aGVtZTtcblxuICAgIGNvbnN0IGxhYmVsQ29sb3IgPSB0aGVtZS5kYXJrXG4gICAgICA/IGNvbG9ycy50ZXh0XG4gICAgICA6IGNvbG9yKGNvbG9ycy50ZXh0KVxuICAgICAgICAgIC5mYWRlKDAuNTQpXG4gICAgICAgICAgLnJnYigpXG4gICAgICAgICAgLnN0cmluZygpO1xuICAgIGNvbnN0IGJhY2tkcm9wT3BhY2l0eSA9IG9wZW5cbiAgICAgID8gdGhpcy5zdGF0ZS5iYWNrZHJvcC5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgaW5wdXRSYW5nZTogWzAsIDAuNSwgMV0sXG4gICAgICAgICAgb3V0cHV0UmFuZ2U6IFswLCAxLCAxXSxcbiAgICAgICAgfSlcbiAgICAgIDogdGhpcy5zdGF0ZS5iYWNrZHJvcDtcblxuICAgIGNvbnN0IG9wYWNpdGllcyA9IHRoaXMuc3RhdGUuYW5pbWF0aW9ucztcbiAgICBjb25zdCBzY2FsZXMgPSBvcGFjaXRpZXMubWFwKFxuICAgICAgb3BhY2l0eSA9PlxuICAgICAgICBvcGVuXG4gICAgICAgICAgPyBvcGFjaXR5LmludGVycG9sYXRlKHtcbiAgICAgICAgICAgICAgaW5wdXRSYW5nZTogWzAsIDFdLFxuICAgICAgICAgICAgICBvdXRwdXRSYW5nZTogWzAuOCwgMV0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogMVxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXcgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCIgc3R5bGU9e1tzdHlsZXMuY29udGFpbmVyLCBzdHlsZV19PlxuICAgICAgICB7b3BlbiA/IDxTdGF0dXNCYXIgYmFyU3R5bGU9XCJsaWdodC1jb250ZW50XCIgLz4gOiBudWxsfVxuICAgICAgICA8VG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIG9uUHJlc3M9e3RoaXMuX2Nsb3NlfT5cbiAgICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgICAgcG9pbnRlckV2ZW50cz17b3BlbiA/ICdhdXRvJyA6ICdub25lJ31cbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy5iYWNrZHJvcCxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IGJhY2tkcm9wT3BhY2l0eSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5iYWNrZHJvcCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF19XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Ub3VjaGFibGVXaXRob3V0RmVlZGJhY2s+XG4gICAgICAgIDxTYWZlQXJlYVZpZXcgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCIgc3R5bGU9e3N0eWxlcy5zYWZlQXJlYX0+XG4gICAgICAgICAgPFZpZXcgcG9pbnRlckV2ZW50cz17b3BlbiA/ICdib3gtbm9uZScgOiAnbm9uZSd9PlxuICAgICAgICAgICAge2FjdGlvbnMubWFwKChpdCwgaSkgPT4gKFxuICAgICAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgICAgIGtleT17aX0gLy8gZXNsaW50LWRpc2FibGUtbGluZSByZWFjdC9uby1hcnJheS1pbmRleC1rZXlcbiAgICAgICAgICAgICAgICBzdHlsZT17c3R5bGVzLml0ZW19XG4gICAgICAgICAgICAgICAgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpdC5sYWJlbCAmJiAoXG4gICAgICAgICAgICAgICAgICA8Q2FyZFxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFt7IHNjYWxlOiBzY2FsZXNbaV0gfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBvcGFjaXRpZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICAgICAgb25QcmVzcz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGl0Lm9uUHJlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw9e1xuICAgICAgICAgICAgICAgICAgICAgIGl0LmFjY2Vzc2liaWxpdHlMYWJlbCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gaXQuYWNjZXNzaWJpbGl0eUxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGl0LmxhYmVsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0cz1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VGV4dCBzdHlsZT17eyBjb2xvcjogbGFiZWxDb2xvciB9fT57aXQubGFiZWx9PC9UZXh0PlxuICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPEZBQlxuICAgICAgICAgICAgICAgICAgc21hbGxcbiAgICAgICAgICAgICAgICAgIGljb249e2l0Lmljb259XG4gICAgICAgICAgICAgICAgICBjb2xvcj17aXQuY29sb3J9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBbeyBzY2FsZTogc2NhbGVzW2ldIH1dLFxuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IG9wYWNpdGllc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLmNvbG9ycy5zdXJmYWNlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpdC5zdHlsZSxcbiAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICBvblByZXNzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGl0Lm9uUHJlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw9e1xuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgaXQuYWNjZXNzaWJpbGl0eUxhYmVsICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgID8gaXQuYWNjZXNzaWJpbGl0eUxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgOiBpdC5sYWJlbFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0cz1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgIDxGQUJcbiAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHtcbiAgICAgICAgICAgICAgb25QcmVzcyAmJiBvblByZXNzKCk7XG4gICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZSgpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGljb249e2ljb259XG4gICAgICAgICAgICBjb2xvcj17dGhpcy5wcm9wcy5jb2xvcn1cbiAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbD17YWNjZXNzaWJpbGl0eUxhYmVsfVxuICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0cz1cImJ1dHRvblwiXG4gICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBzdHlsZT17W3N0eWxlcy5mYWIsIGZhYlN0eWxlXX1cbiAgICAgICAgICAgIHZpc2libGU9e3Zpc2libGV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9TYWZlQXJlYVZpZXc+XG4gICAgICA8L1ZpZXc+XG4gICAgKTtcbiAgfVxufVxuXG5wb2x5ZmlsbChGQUJHcm91cCk7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShGQUJHcm91cCk7XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgc2FmZUFyZWE6IHtcbiAgICBhbGlnbkl0ZW1zOiAnZmxleC1lbmQnLFxuICB9LFxuICBjb250YWluZXI6IHtcbiAgICAuLi5TdHlsZVNoZWV0LmFic29sdXRlRmlsbE9iamVjdCxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcbiAgfSxcbiAgZmFiOiB7XG4gICAgbWFyZ2luSG9yaXpvbnRhbDogMTYsXG4gICAgbWFyZ2luQm90dG9tOiAxNixcbiAgICBtYXJnaW5Ub3A6IDAsXG4gIH0sXG4gIGJhY2tkcm9wOiB7XG4gICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3QsXG4gIH0sXG4gIGxhYmVsOiB7XG4gICAgYm9yZGVyUmFkaXVzOiA1LFxuICAgIHBhZGRpbmdIb3Jpem9udGFsOiAxMixcbiAgICBwYWRkaW5nVmVydGljYWw6IDYsXG4gICAgbWFyZ2luVmVydGljYWw6IDgsXG4gICAgbWFyZ2luSG9yaXpvbnRhbDogMTYsXG4gICAgZWxldmF0aW9uOiAyLFxuICB9LFxuICBpdGVtOiB7XG4gICAgbWFyZ2luSG9yaXpvbnRhbDogMjQsXG4gICAgbWFyZ2luQm90dG9tOiAxNixcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgfSxcbn0pO1xuIl19