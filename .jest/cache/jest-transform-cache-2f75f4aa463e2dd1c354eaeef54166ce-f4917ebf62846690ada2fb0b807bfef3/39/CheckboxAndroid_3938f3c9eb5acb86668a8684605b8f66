7052e22f0e5753430b39d2d264895923
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _color = _interopRequireDefault(require("color"));

var _Icon = _interopRequireDefault(require("./Icon"));

var _TouchableRipple = _interopRequireDefault(require("./TouchableRipple"));

var _theming = require("../core/theming");

var CheckboxAndroid = function (_React$Component) {
  (0, _inherits2.default)(CheckboxAndroid, _React$Component);

  function CheckboxAndroid() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2.default)(this, CheckboxAndroid);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(CheckboxAndroid)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "state", {
      scaleAnim: new _reactNative.Animated.Value(1)
    });
    return _this;
  }

  (0, _createClass2.default)(CheckboxAndroid, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (prevProps.status === this.props.status) {
        return;
      }

      var checked = this.props.status === 'checked';

      _reactNative.Animated.sequence([_reactNative.Animated.timing(this.state.scaleAnim, {
        toValue: 0.85,
        duration: checked ? 200 : 0
      }), _reactNative.Animated.timing(this.state.scaleAnim, {
        toValue: 1,
        duration: checked ? 200 : 350
      })]).start();
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          status = _this$props.status,
          disabled = _this$props.disabled,
          onPress = _this$props.onPress,
          theme = _this$props.theme,
          rest = (0, _objectWithoutProperties2.default)(_this$props, ["status", "disabled", "onPress", "theme"]);
      var checked = status === 'checked';
      var indeterminate = status === 'indeterminate';
      var checkedColor = this.props.color || theme.colors.accent;
      var uncheckedColor = this.props.uncheckedColor || (0, _color.default)(theme.colors.text).alpha(theme.dark ? 0.7 : 0.54).rgb().string();
      var rippleColor, checkboxColor;

      if (disabled) {
        rippleColor = (0, _color.default)(theme.colors.text).alpha(0.16).rgb().string();
        checkboxColor = theme.colors.disabled;
      } else {
        rippleColor = (0, _color.default)(checkedColor).fade(0.32).rgb().string();
        checkboxColor = checked ? checkedColor : uncheckedColor;
      }

      var borderWidth = this.state.scaleAnim.interpolate({
        inputRange: [0.8, 1],
        outputRange: [7, 0]
      });
      var icon = indeterminate ? 'indeterminate-check-box' : checked ? 'check-box' : 'check-box-outline-blank';
      return React.createElement(_TouchableRipple.default, (0, _extends2.default)({}, rest, {
        borderless: true,
        rippleColor: rippleColor,
        onPress: onPress,
        disabled: disabled,
        accessibilityTraits: disabled ? ['button', 'disabled'] : 'button',
        accessibilityComponentType: "button",
        accessibilityRole: "button",
        accessibilityStates: disabled ? ['disabled'] : undefined,
        accessibilityLiveRegion: "polite",
        style: styles.container
      }), React.createElement(_reactNative.Animated.View, {
        style: {
          transform: [{
            scale: this.state.scaleAnim
          }]
        }
      }, React.createElement(_Icon.default, {
        allowFontScaling: false,
        source: icon,
        size: 24,
        color: checkboxColor
      }), React.createElement(_reactNative.View, {
        style: [_reactNative.StyleSheet.absoluteFill, styles.fillContainer]
      }, React.createElement(_reactNative.Animated.View, {
        style: [styles.fill, {
          borderColor: checkboxColor
        }, {
          borderWidth: borderWidth
        }]
      }))));
    }
  }]);
  return CheckboxAndroid;
}(React.Component);

(0, _defineProperty2.default)(CheckboxAndroid, "displayName", 'Checkbox.Android');

var styles = _reactNative.StyleSheet.create({
  container: {
    borderRadius: 18,
    width: 36,
    height: 36,
    padding: 6
  },
  fillContainer: {
    alignItems: 'center',
    justifyContent: 'center'
  },
  fill: {
    height: 14,
    width: 14
  }
});

var _default = (0, _theming.withTheme)(CheckboxAndroid);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNoZWNrYm94QW5kcm9pZC5qcyJdLCJuYW1lcyI6WyJDaGVja2JveEFuZHJvaWQiLCJzY2FsZUFuaW0iLCJBbmltYXRlZCIsIlZhbHVlIiwicHJldlByb3BzIiwic3RhdHVzIiwicHJvcHMiLCJjaGVja2VkIiwic2VxdWVuY2UiLCJ0aW1pbmciLCJzdGF0ZSIsInRvVmFsdWUiLCJkdXJhdGlvbiIsInN0YXJ0IiwiZGlzYWJsZWQiLCJvblByZXNzIiwidGhlbWUiLCJyZXN0IiwiaW5kZXRlcm1pbmF0ZSIsImNoZWNrZWRDb2xvciIsImNvbG9yIiwiY29sb3JzIiwiYWNjZW50IiwidW5jaGVja2VkQ29sb3IiLCJ0ZXh0IiwiYWxwaGEiLCJkYXJrIiwicmdiIiwic3RyaW5nIiwicmlwcGxlQ29sb3IiLCJjaGVja2JveENvbG9yIiwiZmFkZSIsImJvcmRlcldpZHRoIiwiaW50ZXJwb2xhdGUiLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJpY29uIiwidW5kZWZpbmVkIiwic3R5bGVzIiwiY29udGFpbmVyIiwidHJhbnNmb3JtIiwic2NhbGUiLCJTdHlsZVNoZWV0IiwiYWJzb2x1dGVGaWxsIiwiZmlsbENvbnRhaW5lciIsImZpbGwiLCJib3JkZXJDb2xvciIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY3JlYXRlIiwiYm9yZGVyUmFkaXVzIiwid2lkdGgiLCJoZWlnaHQiLCJwYWRkaW5nIiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7SUFpRE1BLGU7Ozs7Ozs7Ozs7Ozs7Ozt3RkFHSTtBQUNOQyxNQUFBQSxTQUFTLEVBQUUsSUFBSUMsc0JBQVNDLEtBQWIsQ0FBbUIsQ0FBbkI7QUFETCxLOzs7Ozs7dUNBSVdDLFMsRUFBVztBQUM1QixVQUFJQSxTQUFTLENBQUNDLE1BQVYsS0FBcUIsS0FBS0MsS0FBTCxDQUFXRCxNQUFwQyxFQUE0QztBQUMxQztBQUNEOztBQUVELFVBQU1FLE9BQU8sR0FBRyxLQUFLRCxLQUFMLENBQVdELE1BQVgsS0FBc0IsU0FBdEM7O0FBQ0FILDRCQUFTTSxRQUFULENBQWtCLENBQ2hCTixzQkFBU08sTUFBVCxDQUFnQixLQUFLQyxLQUFMLENBQVdULFNBQTNCLEVBQXNDO0FBQ3BDVSxRQUFBQSxPQUFPLEVBQUUsSUFEMkI7QUFFcENDLFFBQUFBLFFBQVEsRUFBRUwsT0FBTyxHQUFHLEdBQUgsR0FBUztBQUZVLE9BQXRDLENBRGdCLEVBS2hCTCxzQkFBU08sTUFBVCxDQUFnQixLQUFLQyxLQUFMLENBQVdULFNBQTNCLEVBQXNDO0FBQ3BDVSxRQUFBQSxPQUFPLEVBQUUsQ0FEMkI7QUFFcENDLFFBQUFBLFFBQVEsRUFBRUwsT0FBTyxHQUFHLEdBQUgsR0FBUztBQUZVLE9BQXRDLENBTGdCLENBQWxCLEVBU0dNLEtBVEg7QUFVRDs7OzZCQUVRO0FBQUEsd0JBQytDLEtBQUtQLEtBRHBEO0FBQUEsVUFDQ0QsTUFERCxlQUNDQSxNQUREO0FBQUEsVUFDU1MsUUFEVCxlQUNTQSxRQURUO0FBQUEsVUFDbUJDLE9BRG5CLGVBQ21CQSxPQURuQjtBQUFBLFVBQzRCQyxLQUQ1QixlQUM0QkEsS0FENUI7QUFBQSxVQUNzQ0MsSUFEdEM7QUFFUCxVQUFNVixPQUFPLEdBQUdGLE1BQU0sS0FBSyxTQUEzQjtBQUNBLFVBQU1hLGFBQWEsR0FBR2IsTUFBTSxLQUFLLGVBQWpDO0FBQ0EsVUFBTWMsWUFBWSxHQUFHLEtBQUtiLEtBQUwsQ0FBV2MsS0FBWCxJQUFvQkosS0FBSyxDQUFDSyxNQUFOLENBQWFDLE1BQXREO0FBQ0EsVUFBTUMsY0FBYyxHQUNsQixLQUFLakIsS0FBTCxDQUFXaUIsY0FBWCxJQUNBLG9CQUFNUCxLQUFLLENBQUNLLE1BQU4sQ0FBYUcsSUFBbkIsRUFDR0MsS0FESCxDQUNTVCxLQUFLLENBQUNVLElBQU4sR0FBYSxHQUFiLEdBQW1CLElBRDVCLEVBRUdDLEdBRkgsR0FHR0MsTUFISCxFQUZGO0FBT0EsVUFBSUMsV0FBSixFQUFpQkMsYUFBakI7O0FBRUEsVUFBSWhCLFFBQUosRUFBYztBQUNaZSxRQUFBQSxXQUFXLEdBQUcsb0JBQU1iLEtBQUssQ0FBQ0ssTUFBTixDQUFhRyxJQUFuQixFQUNYQyxLQURXLENBQ0wsSUFESyxFQUVYRSxHQUZXLEdBR1hDLE1BSFcsRUFBZDtBQUlBRSxRQUFBQSxhQUFhLEdBQUdkLEtBQUssQ0FBQ0ssTUFBTixDQUFhUCxRQUE3QjtBQUNELE9BTkQsTUFNTztBQUNMZSxRQUFBQSxXQUFXLEdBQUcsb0JBQU1WLFlBQU4sRUFDWFksSUFEVyxDQUNOLElBRE0sRUFFWEosR0FGVyxHQUdYQyxNQUhXLEVBQWQ7QUFJQUUsUUFBQUEsYUFBYSxHQUFHdkIsT0FBTyxHQUFHWSxZQUFILEdBQWtCSSxjQUF6QztBQUNEOztBQUVELFVBQU1TLFdBQVcsR0FBRyxLQUFLdEIsS0FBTCxDQUFXVCxTQUFYLENBQXFCZ0MsV0FBckIsQ0FBaUM7QUFDbkRDLFFBQUFBLFVBQVUsRUFBRSxDQUFDLEdBQUQsRUFBTSxDQUFOLENBRHVDO0FBRW5EQyxRQUFBQSxXQUFXLEVBQUUsQ0FBQyxDQUFELEVBQUksQ0FBSjtBQUZzQyxPQUFqQyxDQUFwQjtBQUtBLFVBQU1DLElBQUksR0FBR2xCLGFBQWEsR0FDdEIseUJBRHNCLEdBRXRCWCxPQUFPLEdBQ0wsV0FESyxHQUVMLHlCQUpOO0FBTUEsYUFDRSxvQkFBQyx3QkFBRCw2QkFDTVUsSUFETjtBQUVFLFFBQUEsVUFBVSxNQUZaO0FBR0UsUUFBQSxXQUFXLEVBQUVZLFdBSGY7QUFJRSxRQUFBLE9BQU8sRUFBRWQsT0FKWDtBQUtFLFFBQUEsUUFBUSxFQUFFRCxRQUxaO0FBTUUsUUFBQSxtQkFBbUIsRUFBRUEsUUFBUSxHQUFHLENBQUMsUUFBRCxFQUFXLFVBQVgsQ0FBSCxHQUE0QixRQU4zRDtBQU9FLFFBQUEsMEJBQTBCLEVBQUMsUUFQN0I7QUFRRSxRQUFBLGlCQUFpQixFQUFDLFFBUnBCO0FBU0UsUUFBQSxtQkFBbUIsRUFBRUEsUUFBUSxHQUFHLENBQUMsVUFBRCxDQUFILEdBQWtCdUIsU0FUakQ7QUFVRSxRQUFBLHVCQUF1QixFQUFDLFFBVjFCO0FBV0UsUUFBQSxLQUFLLEVBQUVDLE1BQU0sQ0FBQ0M7QUFYaEIsVUFhRSxvQkFBQyxxQkFBRCxDQUFVLElBQVY7QUFBZSxRQUFBLEtBQUssRUFBRTtBQUFFQyxVQUFBQSxTQUFTLEVBQUUsQ0FBQztBQUFFQyxZQUFBQSxLQUFLLEVBQUUsS0FBSy9CLEtBQUwsQ0FBV1Q7QUFBcEIsV0FBRDtBQUFiO0FBQXRCLFNBQ0Usb0JBQUMsYUFBRDtBQUNFLFFBQUEsZ0JBQWdCLEVBQUUsS0FEcEI7QUFFRSxRQUFBLE1BQU0sRUFBRW1DLElBRlY7QUFHRSxRQUFBLElBQUksRUFBRSxFQUhSO0FBSUUsUUFBQSxLQUFLLEVBQUVOO0FBSlQsUUFERixFQU9FLG9CQUFDLGlCQUFEO0FBQU0sUUFBQSxLQUFLLEVBQUUsQ0FBQ1ksd0JBQVdDLFlBQVosRUFBMEJMLE1BQU0sQ0FBQ00sYUFBakM7QUFBYixTQUNFLG9CQUFDLHFCQUFELENBQVUsSUFBVjtBQUNFLFFBQUEsS0FBSyxFQUFFLENBQ0xOLE1BQU0sQ0FBQ08sSUFERixFQUVMO0FBQUVDLFVBQUFBLFdBQVcsRUFBRWhCO0FBQWYsU0FGSyxFQUdMO0FBQUVFLFVBQUFBLFdBQVcsRUFBWEE7QUFBRixTQUhLO0FBRFQsUUFERixDQVBGLENBYkYsQ0FERjtBQWlDRDs7O0VBakcyQmUsS0FBSyxDQUFDQyxTOzs4QkFBOUJoRCxlLGlCQUNpQixrQjs7QUFtR3ZCLElBQU1zQyxNQUFNLEdBQUdJLHdCQUFXTyxNQUFYLENBQWtCO0FBQy9CVixFQUFBQSxTQUFTLEVBQUU7QUFDVFcsSUFBQUEsWUFBWSxFQUFFLEVBREw7QUFFVEMsSUFBQUEsS0FBSyxFQUFFLEVBRkU7QUFHVEMsSUFBQUEsTUFBTSxFQUFFLEVBSEM7QUFJVEMsSUFBQUEsT0FBTyxFQUFFO0FBSkEsR0FEb0I7QUFPL0JULEVBQUFBLGFBQWEsRUFBRTtBQUNiVSxJQUFBQSxVQUFVLEVBQUUsUUFEQztBQUViQyxJQUFBQSxjQUFjLEVBQUU7QUFGSCxHQVBnQjtBQVcvQlYsRUFBQUEsSUFBSSxFQUFFO0FBQ0pPLElBQUFBLE1BQU0sRUFBRSxFQURKO0FBRUpELElBQUFBLEtBQUssRUFBRTtBQUZIO0FBWHlCLENBQWxCLENBQWY7O2VBaUJlLHdCQUFVbkQsZUFBVixDIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQW5pbWF0ZWQsIFZpZXcsIFN0eWxlU2hlZXQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IGNvbG9yIGZyb20gJ2NvbG9yJztcbmltcG9ydCBJY29uIGZyb20gJy4vSWNvbic7XG5pbXBvcnQgVG91Y2hhYmxlUmlwcGxlIGZyb20gJy4vVG91Y2hhYmxlUmlwcGxlJztcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJy4uL2NvcmUvdGhlbWluZyc7XG5pbXBvcnQgdHlwZSB7IFRoZW1lLCAkUmVtb3ZlQ2hpbGRyZW4gfSBmcm9tICcuLi90eXBlcyc7XG5cbnR5cGUgUHJvcHMgPSAkUmVtb3ZlQ2hpbGRyZW48dHlwZW9mIFRvdWNoYWJsZVJpcHBsZT4gJiB7fFxuICAvKipcbiAgICogU3RhdHVzIG9mIGNoZWNrYm94LlxuICAgKi9cbiAgc3RhdHVzOiAnY2hlY2tlZCcgfCAndW5jaGVja2VkJyB8ICdpbmRldGVybWluYXRlJyxcbiAgLyoqXG4gICAqIFdoZXRoZXIgY2hlY2tib3ggaXMgZGlzYWJsZWQuXG4gICAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW4sXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIG9uIHByZXNzLlxuICAgKi9cbiAgb25QcmVzcz86ICgpID0+IG1peGVkLFxuICAvKipcbiAgICogQ3VzdG9tIGNvbG9yIGZvciB1bmNoZWNrZWQgY2hlY2tib3guXG4gICAqL1xuICB1bmNoZWNrZWRDb2xvcj86IHN0cmluZyxcbiAgLyoqXG4gICAqIEN1c3RvbSBjb2xvciBmb3IgY2hlY2tib3guXG4gICAqL1xuICBjb2xvcj86IHN0cmluZyxcbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgdGhlbWU6IFRoZW1lLFxufH07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIHNjYWxlQW5pbTogQW5pbWF0ZWQuVmFsdWUsXG59O1xuXG4vKipcbiAqIENoZWNrYm94ZXMgYWxsb3cgdGhlIHNlbGVjdGlvbiBvZiBtdWx0aXBsZSBvcHRpb25zIGZyb20gYSBzZXQuXG4gKiBUaGlzIGNvbXBvbmVudCBmb2xsb3dzIHBsYXRmb3JtIGd1aWRlbGluZXMgZm9yIEFuZHJvaWQuXG4gKlxuICogPGRpdiBjbGFzcz1cInNjcmVlbnNob3RzXCI+XG4gKiAgIDxmaWd1cmU+XG4gKiAgICAgPGltZyBzcmM9XCJzY3JlZW5zaG90cy9jaGVja2JveC1lbmFibGVkLmFuZHJvaWQucG5nXCIgLz5cbiAqICAgICA8ZmlnY2FwdGlvbj5FbmFibGVkPC9maWdjYXB0aW9uPlxuICogICA8L2ZpZ3VyZT5cbiAqICAgPGZpZ3VyZT5cbiAqICAgICA8aW1nIHNyYz1cInNjcmVlbnNob3RzL2NoZWNrYm94LWRpc2FibGVkLmFuZHJvaWQucG5nXCIgLz5cbiAqICAgICA8ZmlnY2FwdGlvbj5EaXNhYmxlZDwvZmlnY2FwdGlvbj5cbiAqICAgPC9maWd1cmU+XG4gKiA8L2Rpdj5cbiAqL1xuY2xhc3MgQ2hlY2tib3hBbmRyb2lkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnQ2hlY2tib3guQW5kcm9pZCc7XG5cbiAgc3RhdGUgPSB7XG4gICAgc2NhbGVBbmltOiBuZXcgQW5pbWF0ZWQuVmFsdWUoMSksXG4gIH07XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgIGlmIChwcmV2UHJvcHMuc3RhdHVzID09PSB0aGlzLnByb3BzLnN0YXR1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrZWQgPSB0aGlzLnByb3BzLnN0YXR1cyA9PT0gJ2NoZWNrZWQnO1xuICAgIEFuaW1hdGVkLnNlcXVlbmNlKFtcbiAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLnNjYWxlQW5pbSwge1xuICAgICAgICB0b1ZhbHVlOiAwLjg1LFxuICAgICAgICBkdXJhdGlvbjogY2hlY2tlZCA/IDIwMCA6IDAsXG4gICAgICB9KSxcbiAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLnNjYWxlQW5pbSwge1xuICAgICAgICB0b1ZhbHVlOiAxLFxuICAgICAgICBkdXJhdGlvbjogY2hlY2tlZCA/IDIwMCA6IDM1MCxcbiAgICAgIH0pLFxuICAgIF0pLnN0YXJ0KCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBzdGF0dXMsIGRpc2FibGVkLCBvblByZXNzLCB0aGVtZSwgLi4ucmVzdCB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBjaGVja2VkID0gc3RhdHVzID09PSAnY2hlY2tlZCc7XG4gICAgY29uc3QgaW5kZXRlcm1pbmF0ZSA9IHN0YXR1cyA9PT0gJ2luZGV0ZXJtaW5hdGUnO1xuICAgIGNvbnN0IGNoZWNrZWRDb2xvciA9IHRoaXMucHJvcHMuY29sb3IgfHwgdGhlbWUuY29sb3JzLmFjY2VudDtcbiAgICBjb25zdCB1bmNoZWNrZWRDb2xvciA9XG4gICAgICB0aGlzLnByb3BzLnVuY2hlY2tlZENvbG9yIHx8XG4gICAgICBjb2xvcih0aGVtZS5jb2xvcnMudGV4dClcbiAgICAgICAgLmFscGhhKHRoZW1lLmRhcmsgPyAwLjcgOiAwLjU0KVxuICAgICAgICAucmdiKClcbiAgICAgICAgLnN0cmluZygpO1xuXG4gICAgbGV0IHJpcHBsZUNvbG9yLCBjaGVja2JveENvbG9yO1xuXG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICByaXBwbGVDb2xvciA9IGNvbG9yKHRoZW1lLmNvbG9ycy50ZXh0KVxuICAgICAgICAuYWxwaGEoMC4xNilcbiAgICAgICAgLnJnYigpXG4gICAgICAgIC5zdHJpbmcoKTtcbiAgICAgIGNoZWNrYm94Q29sb3IgPSB0aGVtZS5jb2xvcnMuZGlzYWJsZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJpcHBsZUNvbG9yID0gY29sb3IoY2hlY2tlZENvbG9yKVxuICAgICAgICAuZmFkZSgwLjMyKVxuICAgICAgICAucmdiKClcbiAgICAgICAgLnN0cmluZygpO1xuICAgICAgY2hlY2tib3hDb2xvciA9IGNoZWNrZWQgPyBjaGVja2VkQ29sb3IgOiB1bmNoZWNrZWRDb2xvcjtcbiAgICB9XG5cbiAgICBjb25zdCBib3JkZXJXaWR0aCA9IHRoaXMuc3RhdGUuc2NhbGVBbmltLmludGVycG9sYXRlKHtcbiAgICAgIGlucHV0UmFuZ2U6IFswLjgsIDFdLFxuICAgICAgb3V0cHV0UmFuZ2U6IFs3LCAwXSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGljb24gPSBpbmRldGVybWluYXRlXG4gICAgICA/ICdpbmRldGVybWluYXRlLWNoZWNrLWJveCdcbiAgICAgIDogY2hlY2tlZFxuICAgICAgICA/ICdjaGVjay1ib3gnXG4gICAgICAgIDogJ2NoZWNrLWJveC1vdXRsaW5lLWJsYW5rJztcblxuICAgIHJldHVybiAoXG4gICAgICA8VG91Y2hhYmxlUmlwcGxlXG4gICAgICAgIHsuLi5yZXN0fVxuICAgICAgICBib3JkZXJsZXNzXG4gICAgICAgIHJpcHBsZUNvbG9yPXtyaXBwbGVDb2xvcn1cbiAgICAgICAgb25QcmVzcz17b25QcmVzc31cbiAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5VHJhaXRzPXtkaXNhYmxlZCA/IFsnYnV0dG9uJywgJ2Rpc2FibGVkJ10gOiAnYnV0dG9uJ31cbiAgICAgICAgYWNjZXNzaWJpbGl0eUNvbXBvbmVudFR5cGU9XCJidXR0b25cIlxuICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgIGFjY2Vzc2liaWxpdHlTdGF0ZXM9e2Rpc2FibGVkID8gWydkaXNhYmxlZCddIDogdW5kZWZpbmVkfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvbj1cInBvbGl0ZVwiXG4gICAgICAgIHN0eWxlPXtzdHlsZXMuY29udGFpbmVyfVxuICAgICAgPlxuICAgICAgICA8QW5pbWF0ZWQuVmlldyBzdHlsZT17eyB0cmFuc2Zvcm06IFt7IHNjYWxlOiB0aGlzLnN0YXRlLnNjYWxlQW5pbSB9XSB9fT5cbiAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgYWxsb3dGb250U2NhbGluZz17ZmFsc2V9XG4gICAgICAgICAgICBzb3VyY2U9e2ljb259XG4gICAgICAgICAgICBzaXplPXsyNH1cbiAgICAgICAgICAgIGNvbG9yPXtjaGVja2JveENvbG9yfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPFZpZXcgc3R5bGU9e1tTdHlsZVNoZWV0LmFic29sdXRlRmlsbCwgc3R5bGVzLmZpbGxDb250YWluZXJdfT5cbiAgICAgICAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgICAgc3R5bGVzLmZpbGwsXG4gICAgICAgICAgICAgICAgeyBib3JkZXJDb2xvcjogY2hlY2tib3hDb2xvciB9LFxuICAgICAgICAgICAgICAgIHsgYm9yZGVyV2lkdGggfSxcbiAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgICA8L1RvdWNoYWJsZVJpcHBsZT5cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgYm9yZGVyUmFkaXVzOiAxOCxcbiAgICB3aWR0aDogMzYsXG4gICAgaGVpZ2h0OiAzNixcbiAgICBwYWRkaW5nOiA2LFxuICB9LFxuICBmaWxsQ29udGFpbmVyOiB7XG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICB9LFxuICBmaWxsOiB7XG4gICAgaGVpZ2h0OiAxNCxcbiAgICB3aWR0aDogMTQsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKENoZWNrYm94QW5kcm9pZCk7XG4iXX0=