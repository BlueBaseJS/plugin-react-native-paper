6d57c109c97ae57a66deb594dc6bcee6
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _color = _interopRequireDefault(require("color"));

var _Text = _interopRequireDefault(require("../Typography/Text"));

var AnimatedText = _reactNative.Animated.createAnimatedComponent(_Text.default);

var OUTLINE_MINIMIZED_LABEL_Y_OFFSET = -29;
var MAXIMIZED_LABEL_FONT_SIZE = 16;
var MINIMIZED_LABEL_FONT_SIZE = 12;
var LABEL_WIGGLE_X_OFFSET = 4;
var LABEL_PADDING_HORIZONTAL = 12;
var RANDOM_VALUE_TO_CENTER_LABEL = 4;

var TextInputOutlined = function (_React$Component) {
  (0, _inherits2.default)(TextInputOutlined, _React$Component);

  function TextInputOutlined() {
    (0, _classCallCheck2.default)(this, TextInputOutlined);
    return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(TextInputOutlined).apply(this, arguments));
  }

  (0, _createClass2.default)(TextInputOutlined, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          disabled = _this$props.disabled,
          label = _this$props.label,
          error = _this$props.error,
          selectionColor = _this$props.selectionColor,
          underlineColor = _this$props.underlineColor,
          style = _this$props.style,
          theme = _this$props.theme,
          render = _this$props.render,
          multiline = _this$props.multiline,
          parentState = _this$props.parentState,
          innerRef = _this$props.innerRef,
          onFocus = _this$props.onFocus,
          onBlur = _this$props.onBlur,
          onChangeText = _this$props.onChangeText,
          onLayoutAnimatedText = _this$props.onLayoutAnimatedText,
          rest = (0, _objectWithoutProperties2.default)(_this$props, ["disabled", "label", "error", "selectionColor", "underlineColor", "style", "theme", "render", "multiline", "parentState", "innerRef", "onFocus", "onBlur", "onChangeText", "onLayoutAnimatedText"]);
      var colors = theme.colors,
          fonts = theme.fonts;
      var fontFamily = fonts.regular;
      var hasActiveOutline = parentState.focused || error;

      var _ref = _reactNative.StyleSheet.flatten(style) || {},
          _ref$backgroundColor = _ref.backgroundColor,
          backgroundColor = _ref$backgroundColor === void 0 ? colors.background : _ref$backgroundColor;

      var inputTextColor, activeColor, outlineColor, placeholderColor, containerStyle;

      if (disabled) {
        inputTextColor = activeColor = (0, _color.default)(colors.text).alpha(0.54).rgb().string();
        placeholderColor = outlineColor = colors.disabled;
      } else {
        inputTextColor = colors.text;
        activeColor = error ? colors.error : colors.primary;
        placeholderColor = outlineColor = colors.placeholder;
      }

      var labelHalfWidth = parentState.labelLayout.width / 2;
      var baseLabelTranslateX = (_reactNative.I18nManager.isRTL ? 1 : -1) * (1 - MINIMIZED_LABEL_FONT_SIZE / MAXIMIZED_LABEL_FONT_SIZE) * labelHalfWidth;
      var labelStyle = {
        fontFamily: fontFamily,
        fontSize: MAXIMIZED_LABEL_FONT_SIZE,
        transform: [{
          translateX: parentState.error.interpolate({
            inputRange: [0, 0.5, 1],
            outputRange: [0, parentState.value && error ? LABEL_WIGGLE_X_OFFSET : 0, 0]
          })
        }, {
          translateY: parentState.labeled.interpolate({
            inputRange: [0, 1],
            outputRange: [OUTLINE_MINIMIZED_LABEL_Y_OFFSET, 0]
          })
        }, {
          scale: parentState.labeled.interpolate({
            inputRange: [0, 1],
            outputRange: [MINIMIZED_LABEL_FONT_SIZE / MAXIMIZED_LABEL_FONT_SIZE, 1]
          })
        }, {
          translateX: parentState.labeled.interpolate({
            inputRange: [0, 1],
            outputRange: [baseLabelTranslateX > 0 ? baseLabelTranslateX + labelHalfWidth / LABEL_PADDING_HORIZONTAL - RANDOM_VALUE_TO_CENTER_LABEL : baseLabelTranslateX - labelHalfWidth / LABEL_PADDING_HORIZONTAL + RANDOM_VALUE_TO_CENTER_LABEL, 0]
          })
        }]
      };
      return React.createElement(_reactNative.View, {
        style: [containerStyle, style]
      }, React.createElement(_reactNative.View, {
        pointerEvents: "none",
        style: [styles.outline, {
          borderRadius: theme.roundness,
          borderWidth: hasActiveOutline ? 2 : 1,
          borderColor: hasActiveOutline ? activeColor : outlineColor
        }]
      }), label ? React.createElement(AnimatedText, {
        pointerEvents: "none",
        style: [styles.outlinedLabelBackground, {
          backgroundColor: backgroundColor,
          fontFamily: fontFamily,
          fontSize: MINIMIZED_LABEL_FONT_SIZE,
          opacity: parentState.labeled.interpolate({
            inputRange: [0, 0.9, 1],
            outputRange: [1, 1, 0]
          }),
          transform: [{
            scaleX: parentState.labeled.interpolate({
              inputRange: [0, 1],
              outputRange: [1, 0]
            })
          }]
        }],
        numberOfLines: 1
      }, label) : null, label ? React.createElement(_reactNative.View, {
        pointerEvents: "none",
        style: [_reactNative.StyleSheet.absoluteFill, {
          opacity: parentState.value || parentState.focused ? parentState.labelLayout.measured ? 1 : 0 : 1
        }]
      }, React.createElement(AnimatedText, {
        onLayout: onLayoutAnimatedText,
        style: [styles.placeholder, styles.placeholderOutlined, labelStyle, {
          color: activeColor,
          opacity: parentState.labeled.interpolate({
            inputRange: [0, 1],
            outputRange: [hasActiveOutline ? 1 : 0, 0]
          })
        }],
        numberOfLines: 1
      }, label), React.createElement(AnimatedText, {
        style: [styles.placeholder, styles.placeholderOutlined, labelStyle, {
          color: placeholderColor,
          opacity: hasActiveOutline ? parentState.labeled : 1
        }],
        numberOfLines: 1
      }, label)) : null, render((0, _objectSpread2.default)({}, rest, {
        ref: innerRef,
        onChangeText: onChangeText,
        placeholder: label ? parentState.placeholder : this.props.placeholder,
        placeholderTextColor: placeholderColor,
        editable: !disabled,
        selectionColor: typeof selectionColor === 'undefined' ? activeColor : selectionColor,
        onFocus: onFocus,
        onBlur: onBlur,
        underlineColorAndroid: 'transparent',
        multiline: multiline,
        style: [styles.input, styles.inputOutlined, {
          color: inputTextColor,
          fontFamily: fontFamily,
          textAlignVertical: multiline ? 'top' : 'center'
        }]
      })));
    }
  }]);
  return TextInputOutlined;
}(React.Component);

(0, _defineProperty2.default)(TextInputOutlined, "defaultProps", {
  disabled: false,
  error: false,
  multiline: false,
  editable: true,
  render: function render(props) {
    return React.createElement(_reactNative.TextInput, props);
  }
});
var _default = TextInputOutlined;
exports.default = _default;

var styles = _reactNative.StyleSheet.create({
  placeholder: {
    position: 'absolute',
    left: 0,
    fontSize: 16,
    paddingHorizontal: LABEL_PADDING_HORIZONTAL
  },
  placeholderOutlined: {
    top: 25
  },
  outline: {
    position: 'absolute',
    left: 0,
    right: 0,
    top: 6,
    bottom: 0
  },
  outlinedLabelBackground: {
    position: 'absolute',
    top: 0,
    left: 8,
    paddingHorizontal: 4,
    color: 'transparent'
  },
  input: {
    flexGrow: 1,
    paddingHorizontal: 12,
    fontSize: 16,
    margin: 0,
    minHeight: 58,
    textAlign: _reactNative.I18nManager.isRTL ? 'right' : 'left',
    zIndex: 1
  },
  inputOutlined: {
    paddingTop: 20,
    paddingBottom: 16,
    minHeight: 64
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHRJbnB1dE91dGxpbmVkLmpzIl0sIm5hbWVzIjpbIkFuaW1hdGVkVGV4dCIsIkFuaW1hdGVkIiwiY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQiLCJUZXh0IiwiT1VUTElORV9NSU5JTUlaRURfTEFCRUxfWV9PRkZTRVQiLCJNQVhJTUlaRURfTEFCRUxfRk9OVF9TSVpFIiwiTUlOSU1JWkVEX0xBQkVMX0ZPTlRfU0laRSIsIkxBQkVMX1dJR0dMRV9YX09GRlNFVCIsIkxBQkVMX1BBRERJTkdfSE9SSVpPTlRBTCIsIlJBTkRPTV9WQUxVRV9UT19DRU5URVJfTEFCRUwiLCJUZXh0SW5wdXRPdXRsaW5lZCIsInByb3BzIiwiZGlzYWJsZWQiLCJsYWJlbCIsImVycm9yIiwic2VsZWN0aW9uQ29sb3IiLCJ1bmRlcmxpbmVDb2xvciIsInN0eWxlIiwidGhlbWUiLCJyZW5kZXIiLCJtdWx0aWxpbmUiLCJwYXJlbnRTdGF0ZSIsImlubmVyUmVmIiwib25Gb2N1cyIsIm9uQmx1ciIsIm9uQ2hhbmdlVGV4dCIsIm9uTGF5b3V0QW5pbWF0ZWRUZXh0IiwicmVzdCIsImNvbG9ycyIsImZvbnRzIiwiZm9udEZhbWlseSIsInJlZ3VsYXIiLCJoYXNBY3RpdmVPdXRsaW5lIiwiZm9jdXNlZCIsIlN0eWxlU2hlZXQiLCJmbGF0dGVuIiwiYmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZCIsImlucHV0VGV4dENvbG9yIiwiYWN0aXZlQ29sb3IiLCJvdXRsaW5lQ29sb3IiLCJwbGFjZWhvbGRlckNvbG9yIiwiY29udGFpbmVyU3R5bGUiLCJ0ZXh0IiwiYWxwaGEiLCJyZ2IiLCJzdHJpbmciLCJwcmltYXJ5IiwicGxhY2Vob2xkZXIiLCJsYWJlbEhhbGZXaWR0aCIsImxhYmVsTGF5b3V0Iiwid2lkdGgiLCJiYXNlTGFiZWxUcmFuc2xhdGVYIiwiSTE4bk1hbmFnZXIiLCJpc1JUTCIsImxhYmVsU3R5bGUiLCJmb250U2l6ZSIsInRyYW5zZm9ybSIsInRyYW5zbGF0ZVgiLCJpbnRlcnBvbGF0ZSIsImlucHV0UmFuZ2UiLCJvdXRwdXRSYW5nZSIsInZhbHVlIiwidHJhbnNsYXRlWSIsImxhYmVsZWQiLCJzY2FsZSIsInN0eWxlcyIsIm91dGxpbmUiLCJib3JkZXJSYWRpdXMiLCJyb3VuZG5lc3MiLCJib3JkZXJXaWR0aCIsImJvcmRlckNvbG9yIiwib3V0bGluZWRMYWJlbEJhY2tncm91bmQiLCJvcGFjaXR5Iiwic2NhbGVYIiwiYWJzb2x1dGVGaWxsIiwibWVhc3VyZWQiLCJwbGFjZWhvbGRlck91dGxpbmVkIiwiY29sb3IiLCJyZWYiLCJwbGFjZWhvbGRlclRleHRDb2xvciIsImVkaXRhYmxlIiwidW5kZXJsaW5lQ29sb3JBbmRyb2lkIiwiaW5wdXQiLCJpbnB1dE91dGxpbmVkIiwidGV4dEFsaWduVmVydGljYWwiLCJSZWFjdCIsIkNvbXBvbmVudCIsImNyZWF0ZSIsInBvc2l0aW9uIiwibGVmdCIsInBhZGRpbmdIb3Jpem9udGFsIiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJmbGV4R3JvdyIsIm1hcmdpbiIsIm1pbkhlaWdodCIsInRleHRBbGlnbiIsInpJbmRleCIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7O0FBQ0E7O0FBT0E7O0FBQ0E7O0FBR0EsSUFBTUEsWUFBWSxHQUFHQyxzQkFBU0MsdUJBQVQsQ0FBaUNDLGFBQWpDLENBQXJCOztBQUVBLElBQU1DLGdDQUFnQyxHQUFHLENBQUMsRUFBMUM7QUFDQSxJQUFNQyx5QkFBeUIsR0FBRyxFQUFsQztBQUNBLElBQU1DLHlCQUF5QixHQUFHLEVBQWxDO0FBQ0EsSUFBTUMscUJBQXFCLEdBQUcsQ0FBOUI7QUFDQSxJQUFNQyx3QkFBd0IsR0FBRyxFQUFqQztBQUNBLElBQU1DLDRCQUE0QixHQUFHLENBQXJDOztJQUVNQyxpQjs7Ozs7Ozs7Ozs2QkFTSztBQUFBLHdCQWtCSCxLQUFLQyxLQWxCRjtBQUFBLFVBRUxDLFFBRkssZUFFTEEsUUFG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LG1CQUFtQixFQUFFO0FBQ25CZSxJQUFBQSxHQUFHLEVBQUU7QUFEYyxHQVBVO0FBVS9CekIsRUFBQUEsT0FBTyxFQUFFO0FBQ1BzQixJQUFBQSxRQUFRLEVBQUUsVUFESDtBQUVQQyxJQUFBQSxJQUFJLEVBQUUsQ0FGQztBQUdQRyxJQUFBQSxLQUFLLEVBQUUsQ0FIQTtBQUlQRCxJQUFBQSxHQUFHLEVBQUUsQ0FKRTtBQUtQRSxJQUFBQSxNQUFNLEVBQUU7QUFMRCxHQVZzQjtBQWlCL0J0QixFQUFBQSx1QkFBdUIsRUFBRTtBQUN2QmlCLElBQUFBLFFBQVEsRUFBRSxVQURhO0FBRXZCRyxJQUFBQSxHQUFHLEVBQUUsQ0FGa0I7QUFHdkJGLElBQUFBLElBQUksRUFBRSxDQUhpQjtBQUl2QkMsSUFBQUEsaUJBQWlCLEVBQUUsQ0FKSTtBQUt2QmIsSUFBQUEsS0FBSyxFQUFFO0FBTGdCLEdBakJNO0FBd0IvQkssRUFBQUEsS0FBSyxFQUFFO0FBQ0xZLElBQUFBLFFBQVEsRUFBRSxDQURMO0FBRUxKLElBQUFBLGlCQUFpQixFQUFFLEVBRmQ7QUFHTG5DLElBQUFBLFFBQVEsRUFBRSxFQUhMO0FBSUx3QyxJQUFBQSxNQUFNLEVBQUUsQ0FKSDtBQUtMQyxJQUFBQSxTQUFTLEVBQUUsRUFMTjtBQU1MQyxJQUFBQSxTQUFTLEVBQUU3Qyx5QkFBWUMsS0FBWixHQUFvQixPQUFwQixHQUE4QixNQU5wQztBQU9MNkMsSUFBQUEsTUFBTSxFQUFFO0FBUEgsR0F4QndCO0FBaUMvQmYsRUFBQUEsYUFBYSxFQUFFO0FBQ2JnQixJQUFBQSxVQUFVLEVBQUUsRUFEQztBQUViQyxJQUFBQSxhQUFhLEVBQUUsRUFGRjtBQUdiSixJQUFBQSxTQUFTLEVBQUU7QUFIRTtBQWpDZ0IsQ0FBbEIsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7XG4gIFZpZXcsXG4gIEFuaW1hdGVkLFxuICBUZXh0SW5wdXQgYXMgTmF0aXZlVGV4dElucHV0LFxuICBTdHlsZVNoZWV0LFxuICBJMThuTWFuYWdlcixcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBjb2xvciBmcm9tICdjb2xvcic7XG5pbXBvcnQgVGV4dCBmcm9tICcuLi9UeXBvZ3JhcGh5L1RleHQnO1xuaW1wb3J0IHR5cGUgeyBDaGlsZFRleHRJbnB1dFByb3BzLCBSZW5kZXJQcm9wcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBBbmltYXRlZFRleHQgPSBBbmltYXRlZC5jcmVhdGVBbmltYXRlZENvbXBvbmVudChUZXh0KTtcblxuY29uc3QgT1VUTElORV9NSU5JTUlaRURfTEFCRUxfWV9PRkZTRVQgPSAtMjk7XG5jb25zdCBNQVhJTUlaRURfTEFCRUxfRk9OVF9TSVpFID0gMTY7XG5jb25zdCBNSU5JTUlaRURfTEFCRUxfRk9OVF9TSVpFID0gMTI7XG5jb25zdCBMQUJFTF9XSUdHTEVfWF9PRkZTRVQgPSA0O1xuY29uc3QgTEFCRUxfUEFERElOR19IT1JJWk9OVEFMID0gMTI7XG5jb25zdCBSQU5ET01fVkFMVUVfVE9fQ0VOVEVSX0xBQkVMID0gNDsgLy8gRG9uJ3Qga25vdyB3aHkgNCwgYnV0IGl0IHdvcmtzXG5cbmNsYXNzIFRleHRJbnB1dE91dGxpbmVkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PENoaWxkVGV4dElucHV0UHJvcHMsIHt9PiB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIGVycm9yOiBmYWxzZSxcbiAgICBtdWx0aWxpbmU6IGZhbHNlLFxuICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgIHJlbmRlcjogKHByb3BzOiBSZW5kZXJQcm9wcykgPT4gPE5hdGl2ZVRleHRJbnB1dCB7Li4ucHJvcHN9IC8+LFxuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGxhYmVsLFxuICAgICAgZXJyb3IsXG4gICAgICBzZWxlY3Rpb25Db2xvcixcbiAgICAgIHVuZGVybGluZUNvbG9yLFxuICAgICAgc3R5bGUsXG4gICAgICB0aGVtZSxcbiAgICAgIHJlbmRlcixcbiAgICAgIG11bHRpbGluZSxcbiAgICAgIHBhcmVudFN0YXRlLFxuICAgICAgaW5uZXJSZWYsXG4gICAgICBvbkZvY3VzLFxuICAgICAgb25CbHVyLFxuICAgICAgb25DaGFuZ2VUZXh0LFxuICAgICAgb25MYXlvdXRBbmltYXRlZFRleHQsXG4gICAgICAuLi5yZXN0XG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCB7IGNvbG9ycywgZm9udHMgfSA9IHRoZW1lO1xuICAgIGNvbnN0IGZvbnRGYW1pbHkgPSBmb250cy5yZWd1bGFyO1xuICAgIGNvbnN0IGhhc0FjdGl2ZU91dGxpbmUgPSBwYXJlbnRTdGF0ZS5mb2N1c2VkIHx8IGVycm9yO1xuICAgIGNvbnN0IHsgYmFja2dyb3VuZENvbG9yID0gY29sb3JzLmJhY2tncm91bmQgfSA9XG4gICAgICBTdHlsZVNoZWV0LmZsYXR0ZW4oc3R5bGUpIHx8IHt9O1xuXG4gICAgbGV0IGlucHV0VGV4dENvbG9yLFxuICAgICAgYWN0aXZlQ29sb3IsXG4gICAgICBvdXRsaW5lQ29sb3IsXG4gICAgICBwbGFjZWhvbGRlckNvbG9yLFxuICAgICAgY29udGFpbmVyU3R5bGU7XG5cbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIGlucHV0VGV4dENvbG9yID0gYWN0aXZlQ29sb3IgPSBjb2xvcihjb2xvcnMudGV4dClcbiAgICAgICAgLmFscGhhKDAuNTQpXG4gICAgICAgIC5yZ2IoKVxuICAgICAgICAuc3RyaW5nKCk7XG4gICAgICBwbGFjZWhvbGRlckNvbG9yID0gb3V0bGluZUNvbG9yID0gY29sb3JzLmRpc2FibGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dFRleHRDb2xvciA9IGNvbG9ycy50ZXh0O1xuICAgICAgYWN0aXZlQ29sb3IgPSBlcnJvciA/IGNvbG9ycy5lcnJvciA6IGNvbG9ycy5wcmltYXJ5O1xuICAgICAgcGxhY2Vob2xkZXJDb2xvciA9IG91dGxpbmVDb2xvciA9IGNvbG9ycy5wbGFjZWhvbGRlcjtcbiAgICB9XG5cbiAgICBjb25zdCBsYWJlbEhhbGZXaWR0aCA9IHBhcmVudFN0YXRlLmxhYmVsTGF5b3V0LndpZHRoIC8gMjtcbiAgICBjb25zdCBiYXNlTGFiZWxUcmFuc2xhdGVYID1cbiAgICAgIChJMThuTWFuYWdlci5pc1JUTCA/IDEgOiAtMSkgKlxuICAgICAgKDEgLSBNSU5JTUlaRURfTEFCRUxfRk9OVF9TSVpFIC8gTUFYSU1JWkVEX0xBQkVMX0ZPTlRfU0laRSkgKlxuICAgICAgbGFiZWxIYWxmV2lkdGg7XG5cbiAgICBjb25zdCBsYWJlbFN0eWxlID0ge1xuICAgICAgZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplOiBNQVhJTUlaRURfTEFCRUxfRk9OVF9TSVpFLFxuICAgICAgdHJhbnNmb3JtOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAvLyBXaWdnbGUgdGhlIGxhYmVsIHdoZW4gdGhlcmUncyBhbiBlcnJvclxuICAgICAgICAgIHRyYW5zbGF0ZVg6IHBhcmVudFN0YXRlLmVycm9yLmludGVycG9sYXRlKHtcbiAgICAgICAgICAgIGlucHV0UmFuZ2U6IFswLCAwLjUsIDFdLFxuICAgICAgICAgICAgb3V0cHV0UmFuZ2U6IFtcbiAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgcGFyZW50U3RhdGUudmFsdWUgJiYgZXJyb3IgPyBMQUJFTF9XSUdHTEVfWF9PRkZTRVQgOiAwLFxuICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIC8vIE1vdmUgbGFiZWwgdG8gdG9wXG4gICAgICAgICAgdHJhbnNsYXRlWTogcGFyZW50U3RhdGUubGFiZWxlZC5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFJhbmdlOiBbMCwgMV0sXG4gICAgICAgICAgICBvdXRwdXRSYW5nZTogW09VVExJTkVfTUlOSU1JWkVEX0xBQkVMX1lfT0ZGU0VULCAwXSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIC8vIE1ha2UgbGFiZWwgc21hbGxlclxuICAgICAgICAgIHNjYWxlOiBwYXJlbnRTdGF0ZS5sYWJlbGVkLmludGVycG9sYXRlKHtcbiAgICAgICAgICAgIGlucHV0UmFuZ2U6IFswLCAxXSxcbiAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbXG4gICAgICAgICAgICAgIE1JTklNSVpFRF9MQUJFTF9GT05UX1NJWkUgLyBNQVhJTUlaRURfTEFCRUxfRk9OVF9TSVpFLFxuICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIC8vIE9mZnNldCBsYWJlbCBzY2FsZSBzaW5jZSBSTiBkb2Vzbid0IHN1cHBvcnQgdHJhbnNmb3JtIG9yaWdpblxuICAgICAgICAgIHRyYW5zbGF0ZVg6IHBhcmVudFN0YXRlLmxhYmVsZWQuaW50ZXJwb2xhdGUoe1xuICAgICAgICAgICAgaW5wdXRSYW5nZTogWzAsIDFdLFxuICAgICAgICAgICAgb3V0cHV0UmFuZ2U6IFtcbiAgICAgICAgICAgICAgYmFzZUxhYmVsVHJhbnNsYXRlWCA+IDBcbiAgICAgICAgICAgICAgICA/IGJhc2VMYWJlbFRyYW5zbGF0ZVggK1xuICAgICAgICAgICAgICAgICAgbGFiZWxIYWxmV2lkdGggLyBMQUJFTF9QQURESU5HX0hPUklaT05UQUwgLVxuICAgICAgICAgICAgICAgICAgUkFORE9NX1ZBTFVFX1RPX0NFTlRFUl9MQUJFTFxuICAgICAgICAgICAgICAgIDogYmFzZUxhYmVsVHJhbnNsYXRlWCAtXG4gICAgICAgICAgICAgICAgICBsYWJlbEhhbGZXaWR0aCAvIExBQkVMX1BBRERJTkdfSE9SSVpPTlRBTCArXG4gICAgICAgICAgICAgICAgICBSQU5ET01fVkFMVUVfVE9fQ0VOVEVSX0xBQkVMLFxuICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8VmlldyBzdHlsZT17W2NvbnRhaW5lclN0eWxlLCBzdHlsZV19PlxuICAgICAgICB7LyogXG4gICAgICAgICAgUmVuZGVyIHRoZSBvdXRsaW5lIHNlcGFyYXRlbHkgZnJvbSB0aGUgY29udGFpbmVyXG4gICAgICAgICAgVGhpcyBpcyBzbyB0aGF0IHRoZSBsYWJlbCBjYW4gb3ZlcmxhcCB0aGUgb3V0bGluZVxuICAgICAgICAgIE90aGVyd2lzZSB0aGUgYm9yZGVyIHdpbGwgY3V0IG9mZiB0aGUgbGFiZWwgb24gQW5kcm9pZCBcbiAgICAgICAgICAqL31cbiAgICAgICAgPFZpZXdcbiAgICAgICAgICBwb2ludGVyRXZlbnRzPVwibm9uZVwiXG4gICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgIHN0eWxlcy5vdXRsaW5lLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnJvdW5kbmVzcyxcbiAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IGhhc0FjdGl2ZU91dGxpbmUgPyAyIDogMSxcbiAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGhhc0FjdGl2ZU91dGxpbmUgPyBhY3RpdmVDb2xvciA6IG91dGxpbmVDb2xvcixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cblxuICAgICAgICB7bGFiZWwgPyAoXG4gICAgICAgICAgLy8gVGhlIGlucHV0IGxhYmVsIHN0YXlzIG9uIHRvcCBvZiB0aGUgb3V0bGluZVxuICAgICAgICAgIC8vIFRoZSBiYWNrZ3JvdW5kIG9mIHRoZSBsYWJlbCBjb3ZlcnMgdGhlIG91dGxpbmUgc28gaXQgbG9va3MgY3V0IG9mZlxuICAgICAgICAgIC8vIFRvIGFjaGlldmUgdGhlIGVmZmVjdCwgd2UgcG9zaXRpb24gdGhlIGFjdHVhbCBsYWJlbCB3aXRoIGEgYmFja2dyb3VuZCBvbiB0b3Agb2YgaXRcbiAgICAgICAgICAvLyBXZSBzZXQgdGhlIGNvbG9yIG9mIHRoZSB0ZXh0IHRvIHRyYW5zcGFyZW50IHNvIG9ubHkgdGhlIGJhY2tncm91bmQgaXMgdmlzaWJsZVxuICAgICAgICAgIDxBbmltYXRlZFRleHRcbiAgICAgICAgICAgIHBvaW50ZXJFdmVudHM9XCJub25lXCJcbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy5vdXRsaW5lZExhYmVsQmFja2dyb3VuZCxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5LFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiBNSU5JTUlaRURfTEFCRUxfRk9OVF9TSVpFLFxuICAgICAgICAgICAgICAgIC8vIEhpZGUgdGhlIGJhY2tncm91bmQgd2hlbiBzY2FsZSB3aWxsIGJlIDBcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSdzIGEgYnVnIGluIFJOIHdoaWNoIG1ha2VzIHNjYWxlOiAwIGFjdCB3ZWlyZFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IHBhcmVudFN0YXRlLmxhYmVsZWQuaW50ZXJwb2xhdGUoe1xuICAgICAgICAgICAgICAgICAgaW5wdXRSYW5nZTogWzAsIDAuOSwgMV0sXG4gICAgICAgICAgICAgICAgICBvdXRwdXRSYW5nZTogWzEsIDEsIDBdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogW1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbmltYXRlIHRoZSBzY2FsZSB3aGVuIGxhYmVsIGlzIG1vdmVkIHVwXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWDogcGFyZW50U3RhdGUubGFiZWxlZC5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgaW5wdXRSYW5nZTogWzAsIDFdLFxuICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFJhbmdlOiBbMSwgMF0sXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXX1cbiAgICAgICAgICAgIG51bWJlck9mTGluZXM9ezF9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2xhYmVsfVxuICAgICAgICAgIDwvQW5pbWF0ZWRUZXh0PlxuICAgICAgICApIDogbnVsbH1cblxuICAgICAgICB7bGFiZWwgPyAoXG4gICAgICAgICAgLy8gUG9zaXRpb24gY29sb3JlZCBwbGFjZWhvbGRlciBhbmQgZ3JheSBwbGFjZWhvbGRlciBvbiB0b3Agb2YgZWFjaCBvdGhlciBhbmQgY3Jvc3NmYWRlIHRoZW1cbiAgICAgICAgICAvLyBUaGlzIGdpdmVzIHRoZSBlZmZlY3Qgb2YgYW5pbWF0aW5nIHRoZSBjb2xvciwgYnV0IGFsbG93cyB1cyB0byB1c2UgbmF0aXZlIGRyaXZlclxuICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICBwb2ludGVyRXZlbnRzPVwibm9uZVwiXG4gICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICBTdHlsZVNoZWV0LmFic29sdXRlRmlsbCxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6XG4gICAgICAgICAgICAgICAgICAvLyBIaWRlIHRoZSBsYWJlbCBpbiBtaW5pbWl6ZWQgc3RhdGUgdW50aWwgd2UgbWVhc3VyZSBpdCdzIHdpZHRoXG4gICAgICAgICAgICAgICAgICBwYXJlbnRTdGF0ZS52YWx1ZSB8fCBwYXJlbnRTdGF0ZS5mb2N1c2VkXG4gICAgICAgICAgICAgICAgICAgID8gcGFyZW50U3RhdGUubGFiZWxMYXlvdXQubWVhc3VyZWRcbiAgICAgICAgICAgICAgICAgICAgICA/IDFcbiAgICAgICAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgICAgICAgOiAxLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8QW5pbWF0ZWRUZXh0XG4gICAgICAgICAgICAgIG9uTGF5b3V0PXtvbkxheW91dEFuaW1hdGVkVGV4dH1cbiAgICAgICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgICAgICBzdHlsZXMucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgc3R5bGVzLnBsYWNlaG9sZGVyT3V0bGluZWQsXG4gICAgICAgICAgICAgICAgbGFiZWxTdHlsZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogYWN0aXZlQ29sb3IsXG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiBwYXJlbnRTdGF0ZS5sYWJlbGVkLmludGVycG9sYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRSYW5nZTogWzAsIDFdLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRSYW5nZTogW2hhc0FjdGl2ZU91dGxpbmUgPyAxIDogMCwgMF0sXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICBudW1iZXJPZkxpbmVzPXsxfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7bGFiZWx9XG4gICAgICAgICAgICA8L0FuaW1hdGVkVGV4dD5cbiAgICAgICAgICAgIDxBbmltYXRlZFRleHRcbiAgICAgICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgICAgICBzdHlsZXMucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgc3R5bGVzLnBsYWNlaG9sZGVyT3V0bGluZWQsXG4gICAgICAgICAgICAgICAgbGFiZWxTdHlsZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogcGxhY2Vob2xkZXJDb2xvcixcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IGhhc0FjdGl2ZU91dGxpbmUgPyBwYXJlbnRTdGF0ZS5sYWJlbGVkIDogMSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICBudW1iZXJPZkxpbmVzPXsxfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7bGFiZWx9XG4gICAgICAgICAgICA8L0FuaW1hdGVkVGV4dD5cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICkgOiBudWxsfVxuXG4gICAgICAgIHtyZW5kZXIoXG4gICAgICAgICAgKHtcbiAgICAgICAgICAgIC4uLnJlc3QsXG4gICAgICAgICAgICByZWY6IGlubmVyUmVmLFxuICAgICAgICAgICAgb25DaGFuZ2VUZXh0LFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGxhYmVsXG4gICAgICAgICAgICAgID8gcGFyZW50U3RhdGUucGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLnBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXJUZXh0Q29sb3I6IHBsYWNlaG9sZGVyQ29sb3IsXG4gICAgICAgICAgICBlZGl0YWJsZTogIWRpc2FibGVkLFxuICAgICAgICAgICAgc2VsZWN0aW9uQ29sb3I6XG4gICAgICAgICAgICAgIHR5cGVvZiBzZWxlY3Rpb25Db2xvciA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IGFjdGl2ZUNvbG9yXG4gICAgICAgICAgICAgICAgOiBzZWxlY3Rpb25Db2xvcixcbiAgICAgICAgICAgIG9uRm9jdXMsXG4gICAgICAgICAgICBvbkJsdXIsXG4gICAgICAgICAgICB1bmRlcmxpbmVDb2xvckFuZHJvaWQ6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICBtdWx0aWxpbmUsXG4gICAgICAgICAgICBzdHlsZTogW1xuICAgICAgICAgICAgICBzdHlsZXMuaW5wdXQsXG4gICAgICAgICAgICAgIHN0eWxlcy5pbnB1dE91dGxpbmVkLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sb3I6IGlucHV0VGV4dENvbG9yLFxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHksXG4gICAgICAgICAgICAgICAgdGV4dEFsaWduVmVydGljYWw6IG11bHRpbGluZSA/ICd0b3AnIDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH06IFJlbmRlclByb3BzKVxuICAgICAgICApfVxuICAgICAgPC9WaWV3PlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGV4dElucHV0T3V0bGluZWQ7XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgcGxhY2Vob2xkZXI6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBsZWZ0OiAwLFxuICAgIGZvbnRTaXplOiAxNixcbiAgICBwYWRkaW5nSG9yaXpvbnRhbDogTEFCRUxfUEFERElOR19IT1JJWk9OVEFMLFxuICB9LFxuICBwbGFjZWhvbGRlck91dGxpbmVkOiB7XG4gICAgdG9wOiAyNSxcbiAgfSxcbiAgb3V0bGluZToge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgdG9wOiA2LFxuICAgIGJvdHRvbTogMCxcbiAgfSxcbiAgb3V0bGluZWRMYWJlbEJhY2tncm91bmQ6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogOCxcbiAgICBwYWRkaW5nSG9yaXpvbnRhbDogNCxcbiAgICBjb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgfSxcbiAgaW5wdXQ6IHtcbiAgICBmbGV4R3JvdzogMSxcbiAgICBwYWRkaW5nSG9yaXpvbnRhbDogMTIsXG4gICAgZm9udFNpemU6IDE2LFxuICAgIG1hcmdpbjogMCxcbiAgICBtaW5IZWlnaHQ6IDU4LFxuICAgIHRleHRBbGlnbjogSTE4bk1hbmFnZXIuaXNSVEwgPyAncmlnaHQnIDogJ2xlZnQnLFxuICAgIHpJbmRleDogMSxcbiAgfSxcbiAgaW5wdXRPdXRsaW5lZDoge1xuICAgIHBhZGRpbmdUb3A6IDIwLFxuICAgIHBhZGRpbmdCb3R0b206IDE2LFxuICAgIG1pbkhlaWdodDogNjQsXG4gIH0sXG59KTtcbiJdfQ==