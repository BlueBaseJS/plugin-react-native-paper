5378d4a09488a0ab3182aa2b14c06e72
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _color = _interopRequireDefault(require("color"));

var _RadioButtonGroup = require("./RadioButtonGroup");

var _TouchableRipple = _interopRequireDefault(require("./TouchableRipple"));

var _theming = require("../core/theming");

var BORDER_WIDTH = 2;

var RadioButtonAndroid = function (_React$Component) {
  (0, _inherits2.default)(RadioButtonAndroid, _React$Component);

  function RadioButtonAndroid() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2.default)(this, RadioButtonAndroid);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(RadioButtonAndroid)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "state", {
      borderAnim: new _reactNative.Animated.Value(BORDER_WIDTH),
      radioAnim: new _reactNative.Animated.Value(1)
    });
    return _this;
  }

  (0, _createClass2.default)(RadioButtonAndroid, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (prevProps.status === this.props.status) {
        return;
      }

      if (this.props.status === 'checked') {
        this.state.radioAnim.setValue(1.2);

        _reactNative.Animated.timing(this.state.radioAnim, {
          toValue: 1,
          duration: 150
        }).start();
      } else {
        this.state.borderAnim.setValue(10);

        _reactNative.Animated.timing(this.state.borderAnim, {
          toValue: BORDER_WIDTH,
          duration: 150
        }).start();
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      return React.createElement(_RadioButtonGroup.RadioButtonContext.Consumer, null, function (context) {
        var _this2$props = _this2.props,
            disabled = _this2$props.disabled,
            onPress = _this2$props.onPress,
            theme = _this2$props.theme,
            rest = (0, _objectWithoutProperties2.default)(_this2$props, ["disabled", "onPress", "theme"]);
        var checkedColor = _this2.props.color || theme.colors.accent;
        var uncheckedColor = _this2.props.uncheckedColor || (0, _color.default)(theme.colors.text).alpha(theme.dark ? 0.7 : 0.54).rgb().string();
        var rippleColor, radioColor;
        var checked = context ? context.value === _this2.props.value : _this2.props.status === 'checked';

        if (disabled) {
          rippleColor = (0, _color.default)(theme.colors.text).alpha(0.16).rgb().string();
          radioColor = theme.colors.disabled;
        } else {
          rippleColor = (0, _color.default)(checkedColor).fade(0.32).rgb().string();
          radioColor = checked ? checkedColor : uncheckedColor;
        }

        return React.createElement(_TouchableRipple.default, (0, _extends2.default)({}, rest, {
          borderless: true,
          rippleColor: rippleColor,
          onPress: disabled ? undefined : function () {
            context && context.onValueChange(_this2.props.value);
            onPress && onPress();
          },
          accessibilityTraits: disabled ? ['button', 'disabled'] : 'button',
          accessibilityComponentType: checked ? 'radiobutton_checked' : 'radiobutton_unchecked',
          accessibilityRole: "button",
          accessibilityStates: disabled ? ['disabled'] : undefined,
          accessibilityLiveRegion: "polite",
          style: styles.container
        }), React.createElement(_reactNative.Animated.View, {
          style: [styles.radio, {
            borderColor: radioColor,
            borderWidth: _this2.state.borderAnim
          }]
        }, checked ? React.createElement(_reactNative.View, {
          style: [_reactNative.StyleSheet.absoluteFill, styles.radioContainer]
        }, React.createElement(_reactNative.Animated.View, {
          style: [styles.dot, {
            backgroundColor: radioColor,
            transform: [{
              scale: _this2.state.radioAnim
            }]
          }]
        })) : null));
      });
    }
  }]);
  return RadioButtonAndroid;
}(React.Component);

(0, _defineProperty2.default)(RadioButtonAndroid, "displayName", 'RadioButton.Android');

var styles = _reactNative.StyleSheet.create({
  container: {
    borderRadius: 18
  },
  radioContainer: {
    alignItems: 'center',
    justifyContent: 'center'
  },
  radio: {
    height: 20,
    width: 20,
    borderRadius: 10,
    margin: 8
  },
  dot: {
    height: 10,
    width: 10,
    borderRadius: 5
  }
});

var _default = (0, _theming.withTheme)(RadioButtonAndroid);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJhZGlvQnV0dG9uQW5kcm9pZC5qcyJdLCJuYW1lcyI6WyJCT1JERVJfV0lEVEgiLCJSYWRpb0J1dHRvbkFuZHJvaWQiLCJib3JkZXJBbmltIiwiQW5pbWF0ZWQiLCJWYWx1ZSIsInJhZGlvQW5pbSIsInByZXZQcm9wcyIsInN0YXR1cyIsInByb3BzIiwic3RhdGUiLCJzZXRWYWx1ZSIsInRpbWluZyIsInRvVmFsdWUiLCJkdXJhdGlvbiIsInN0YXJ0IiwiY29udGV4dCIsImRpc2FibGVkIiwib25QcmVzcyIsInRoZW1lIiwicmVzdCIsImNoZWNrZWRDb2xvciIsImNvbG9yIiwiY29sb3JzIiwiYWNjZW50IiwidW5jaGVja2VkQ29sb3IiLCJ0ZXh0IiwiYWxwaGEiLCJkYXJrIiwicmdiIiwic3RyaW5nIiwicmlwcGxlQ29sb3IiLCJyYWRpb0NvbG9yIiwiY2hlY2tlZCIsInZhbHVlIiwiZmFkZSIsInVuZGVmaW5lZCIsIm9uVmFsdWVDaGFuZ2UiLCJzdHlsZXMiLCJjb250YWluZXIiLCJyYWRpbyIsImJvcmRlckNvbG9yIiwiYm9yZGVyV2lkdGgiLCJTdHlsZVNoZWV0IiwiYWJzb2x1dGVGaWxsIiwicmFkaW9Db250YWluZXIiLCJkb3QiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0cmFuc2Zvcm0iLCJzY2FsZSIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY3JlYXRlIiwiYm9yZGVyUmFkaXVzIiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiaGVpZ2h0Iiwid2lkdGgiLCJtYXJnaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQXVDQSxJQUFNQSxZQUFZLEdBQUcsQ0FBckI7O0lBaUJNQyxrQjs7Ozs7Ozs7Ozs7Ozs7O3dGQUdJO0FBQ05DLE1BQUFBLFVBQVUsRUFBRSxJQUFJQyxzQkFBU0MsS0FBYixDQUFtQkosWUFBbkIsQ0FETjtBQUVOSyxNQUFBQSxTQUFT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LEVBQUU7QUFDVGMsSUFBQUEsWUFBWSxFQUFFO0FBREwsR0FEb0I7QUFJL0JSLEVBQUFBLGNBQWMsRUFBRTtBQUNkUyxJQUFBQSxVQUFVLEVBQUUsUUFERTtBQUVkQyxJQUFBQSxjQUFjLEVBQUU7QUFGRixHQUplO0FBUS9CZixFQUFBQSxLQUFLLEVBQUU7QUFDTGdCLElBQUFBLE1BQU0sRUFBRSxFQURIO0FBRUxDLElBQUFBLEtBQUssRUFBRSxFQUZGO0FBR0xKLElBQUFBLFlBQVksRUFBRSxFQUhUO0FBSUxLLElBQUFBLE1BQU0sRUFBRTtBQUpILEdBUndCO0FBYy9CWixFQUFBQSxHQUFHLEVBQUU7QUFDSFUsSUFBQUEsTUFBTSxFQUFFLEVBREw7QUFFSEMsSUFBQUEsS0FBSyxFQUFFLEVBRko7QUFHSEosSUFBQUEsWUFBWSxFQUFFO0FBSFg7QUFkMEIsQ0FBbEIsQ0FBZjs7ZUFxQmUsd0JBQVVuRCxrQkFBVixDIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQW5pbWF0ZWQsIFZpZXcsIFN0eWxlU2hlZXQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IGNvbG9yIGZyb20gJ2NvbG9yJztcbmltcG9ydCB7IFJhZGlvQnV0dG9uQ29udGV4dCB9IGZyb20gJy4vUmFkaW9CdXR0b25Hcm91cCc7XG5pbXBvcnQgVG91Y2hhYmxlUmlwcGxlIGZyb20gJy4vVG91Y2hhYmxlUmlwcGxlJztcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJy4uL2NvcmUvdGhlbWluZyc7XG5pbXBvcnQgdHlwZSB7IFRoZW1lLCAkUmVtb3ZlQ2hpbGRyZW4gfSBmcm9tICcuLi90eXBlcyc7XG5cbnR5cGUgUHJvcHMgPSAkUmVtb3ZlQ2hpbGRyZW48dHlwZW9mIFRvdWNoYWJsZVJpcHBsZT4gJiB7fFxuICAvKipcbiAgICogVmFsdWUgb2YgdGhlIHJhZGlvIGJ1dHRvblxuICAgKi9cbiAgdmFsdWU6IHN0cmluZyxcbiAgLyoqXG4gICAqIFN0YXR1cyBvZiByYWRpbyBidXR0b24uXG4gICAqL1xuICBzdGF0dXM/OiAnY2hlY2tlZCcgfCAndW5jaGVja2VkJyxcbiAgLyoqXG4gICAqIFdoZXRoZXIgcmFkaW8gaXMgZGlzYWJsZWQuXG4gICAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW4sXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIG9uIHByZXNzLlxuICAgKi9cbiAgb25QcmVzcz86ICgpID0+IG1peGVkLFxuICAvKipcbiAgICogQ3VzdG9tIGNvbG9yIGZvciB1bmNoZWNrZWQgcmFkaW8uXG4gICAqL1xuICB1bmNoZWNrZWRDb2xvcj86IHN0cmluZyxcbiAgLyoqXG4gICAqIEN1c3RvbSBjb2xvciBmb3IgcmFkaW8uXG4gICAqL1xuICBjb2xvcj86IHN0cmluZyxcbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgdGhlbWU6IFRoZW1lLFxufH07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIGJvcmRlckFuaW06IEFuaW1hdGVkLlZhbHVlLFxuICByYWRpb0FuaW06IEFuaW1hdGVkLlZhbHVlLFxufTtcblxuY29uc3QgQk9SREVSX1dJRFRIID0gMjtcblxuLyoqXG4gKiBSYWRpbyBidXR0b25zIGFsbG93IHRoZSBzZWxlY3Rpb24gYSBzaW5nbGUgb3B0aW9uIGZyb20gYSBzZXQuXG4gKiBUaGlzIGNvbXBvbmVudCBmb2xsb3dzIHBsYXRmb3JtIGd1aWRlbGluZXMgZm9yIEFuZHJvaWQuXG4gKlxuICogPGRpdiBjbGFzcz1cInNjcmVlbnNob3RzXCI+XG4gKiAgIDxmaWd1cmU+XG4gKiAgICAgPGltZyBzcmM9XCJzY3JlZW5zaG90cy9yYWRpby1lbmFibGVkLmFuZHJvaWQucG5nXCIgLz5cbiAqICAgICA8ZmlnY2FwdGlvbj5FbmFibGVkPC9maWdjYXB0aW9uPlxuICogICA8L2ZpZ3VyZT5cbiAqICAgPGZpZ3VyZT5cbiAqICAgICA8aW1nIHNyYz1cInNjcmVlbnNob3RzL3JhZGlvLWRpc2FibGVkLmFuZHJvaWQucG5nXCIgLz5cbiAqICAgICA8ZmlnY2FwdGlvbj5EaXNhYmxlZDwvZmlnY2FwdGlvbj5cbiAqICAgPC9maWd1cmU+XG4gKiA8L2Rpdj5cbiAqL1xuY2xhc3MgUmFkaW9CdXR0b25BbmRyb2lkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnUmFkaW9CdXR0b24uQW5kcm9pZCc7XG5cbiAgc3RhdGUgPSB7XG4gICAgYm9yZGVyQW5pbTogbmV3IEFuaW1hdGVkLlZhbHVlKEJPUkRFUl9XSURUSCksXG4gICAgcmFkaW9BbmltOiBuZXcgQW5pbWF0ZWQuVmFsdWUoMSksXG4gIH07XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgIGlmIChwcmV2UHJvcHMuc3RhdHVzID09PSB0aGlzLnByb3BzLnN0YXR1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLnN0YXR1cyA9PT0gJ2NoZWNrZWQnKSB7XG4gICAgICB0aGlzLnN0YXRlLnJhZGlvQW5pbS5zZXRWYWx1ZSgxLjIpO1xuXG4gICAgICBBbmltYXRlZC50aW1pbmcodGhpcy5zdGF0ZS5yYWRpb0FuaW0sIHtcbiAgICAgICAgdG9WYWx1ZTogMSxcbiAgICAgICAgZHVyYXRpb246IDE1MCxcbiAgICAgIH0pLnN0YXJ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuYm9yZGVyQW5pbS5zZXRWYWx1ZSgxMCk7XG5cbiAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLnN0YXRlLmJvcmRlckFuaW0sIHtcbiAgICAgICAgdG9WYWx1ZTogQk9SREVSX1dJRFRILFxuICAgICAgICBkdXJhdGlvbjogMTUwLFxuICAgICAgfSkuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxSYWRpb0J1dHRvbkNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHtjb250ZXh0ID0+IHtcbiAgICAgICAgICBjb25zdCB7IGRpc2FibGVkLCBvblByZXNzLCB0aGVtZSwgLi4ucmVzdCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICBjb25zdCBjaGVja2VkQ29sb3IgPSB0aGlzLnByb3BzLmNvbG9yIHx8IHRoZW1lLmNvbG9ycy5hY2NlbnQ7XG4gICAgICAgICAgY29uc3QgdW5jaGVja2VkQ29sb3IgPVxuICAgICAgICAgICAgdGhpcy5wcm9wcy51bmNoZWNrZWRDb2xvciB8fFxuICAgICAgICAgICAgY29sb3IodGhlbWUuY29sb3JzLnRleHQpXG4gICAgICAgICAgICAgIC5hbHBoYSh0aGVtZS5kYXJrID8gMC43IDogMC41NClcbiAgICAgICAgICAgICAgLnJnYigpXG4gICAgICAgICAgICAgIC5zdHJpbmcoKTtcblxuICAgICAgICAgIGxldCByaXBwbGVDb2xvciwgcmFkaW9Db2xvcjtcblxuICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBjb250ZXh0XG4gICAgICAgICAgICA/IGNvbnRleHQudmFsdWUgPT09IHRoaXMucHJvcHMudmFsdWVcbiAgICAgICAgICAgIDogdGhpcy5wcm9wcy5zdGF0dXMgPT09ICdjaGVja2VkJztcblxuICAgICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgICAgcmlwcGxlQ29sb3IgPSBjb2xvcih0aGVtZS5jb2xvcnMudGV4dClcbiAgICAgICAgICAgICAgLmFscGhhKDAuMTYpXG4gICAgICAgICAgICAgIC5yZ2IoKVxuICAgICAgICAgICAgICAuc3RyaW5nKCk7XG4gICAgICAgICAgICByYWRpb0NvbG9yID0gdGhlbWUuY29sb3JzLmRpc2FibGVkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByaXBwbGVDb2xvciA9IGNvbG9yKGNoZWNrZWRDb2xvcilcbiAgICAgICAgICAgICAgLmZhZGUoMC4zMilcbiAgICAgICAgICAgICAgLnJnYigpXG4gICAgICAgICAgICAgIC5zdHJpbmcoKTtcbiAgICAgICAgICAgIHJhZGlvQ29sb3IgPSBjaGVja2VkID8gY2hlY2tlZENvbG9yIDogdW5jaGVja2VkQ29sb3I7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxUb3VjaGFibGVSaXBwbGVcbiAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgIGJvcmRlcmxlc3NcbiAgICAgICAgICAgICAgcmlwcGxlQ29sb3I9e3JpcHBsZUNvbG9yfVxuICAgICAgICAgICAgICBvblByZXNzPXtcbiAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgIDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgJiYgY29udGV4dC5vblZhbHVlQ2hhbmdlKHRoaXMucHJvcHMudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3MgJiYgb25QcmVzcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0cz17ZGlzYWJsZWQgPyBbJ2J1dHRvbicsICdkaXNhYmxlZCddIDogJ2J1dHRvbid9XG4gICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlDb21wb25lbnRUeXBlPXtcbiAgICAgICAgICAgICAgICBjaGVja2VkID8gJ3JhZGlvYnV0dG9uX2NoZWNrZWQnIDogJ3JhZGlvYnV0dG9uX3VuY2hlY2tlZCdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlTdGF0ZXM9e2Rpc2FibGVkID8gWydkaXNhYmxlZCddIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGl2ZVJlZ2lvbj1cInBvbGl0ZVwiXG4gICAgICAgICAgICAgIHN0eWxlPXtzdHlsZXMuY29udGFpbmVyfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgICAgICBzdHlsZXMucmFkaW8sXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiByYWRpb0NvbG9yLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogdGhpcy5zdGF0ZS5ib3JkZXJBbmltLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2NoZWNrZWQgPyAoXG4gICAgICAgICAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgICAgICAgICBzdHlsZT17W1N0eWxlU2hlZXQuYWJzb2x1dGVGaWxsLCBzdHlsZXMucmFkaW9Db250YWluZXJdfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXMuZG90LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHJhZGlvQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogW3sgc2NhbGU6IHRoaXMuc3RhdGUucmFkaW9BbmltIH1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgICAgICAgICA8L1RvdWNoYWJsZVJpcHBsZT5cbiAgICAgICAgICApO1xuICAgICAgICB9fVxuICAgICAgPC9SYWRpb0J1dHRvbkNvbnRleHQuQ29uc3VtZXI+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGNvbnRhaW5lcjoge1xuICAgIGJvcmRlclJhZGl1czogMTgsXG4gIH0sXG4gIHJhZGlvQ29udGFpbmVyOiB7XG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICB9LFxuICByYWRpbzoge1xuICAgIGhlaWdodDogMjAsXG4gICAgd2lkdGg6IDIwLFxuICAgIGJvcmRlclJhZGl1czogMTAsXG4gICAgbWFyZ2luOiA4LFxuICB9LFxuICBkb3Q6IHtcbiAgICBoZWlnaHQ6IDEwLFxuICAgIHdpZHRoOiAxMCxcbiAgICBib3JkZXJSYWRpdXM6IDUsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKFJhZGlvQnV0dG9uQW5kcm9pZCk7XG4iXX0=