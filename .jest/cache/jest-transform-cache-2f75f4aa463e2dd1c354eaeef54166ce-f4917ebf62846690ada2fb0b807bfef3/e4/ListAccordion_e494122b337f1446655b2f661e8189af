e1f2d2e6f95e3294add502f236a3b7d3
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _color = _interopRequireDefault(require("color"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _TouchableRipple = _interopRequireDefault(require("../TouchableRipple"));

var _Icon = _interopRequireDefault(require("../Icon"));

var _Text = _interopRequireDefault(require("../Typography/Text"));

var _theming = require("../../core/theming");

var ListAccordion = function (_React$Component) {
  (0, _inherits2.default)(ListAccordion, _React$Component);

  function ListAccordion() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2.default)(this, ListAccordion);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(ListAccordion)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "state", {
      expanded: _this.props.expanded || false
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), "_handlePress", function () {
      _this.props.onPress && _this.props.onPress();

      if (_this.props.expanded === undefined) {
        _this.setState(function (state) {
          return {
            expanded: !state.expanded
          };
        });
      }
    });
    return _this;
  }

  (0, _createClass2.default)(ListAccordion, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          left = _this$props.left,
          title = _this$props.title,
          description = _this$props.description,
          children = _this$props.children,
          theme = _this$props.theme,
          style = _this$props.style;
      var titleColor = (0, _color.default)(theme.colors.text).alpha(0.87).rgb().string();
      var descriptionColor = (0, _color.default)(theme.colors.text).alpha(0.54).rgb().string();
      var expanded = this.props.expanded !== undefined ? this.props.expanded : this.state.expanded;
      return React.createElement(_reactNative.View, null, React.createElement(_TouchableRipple.default, {
        style: [styles.container, style],
        onPress: this._handlePress,
        accessibilityTraits: "button",
        accessibilityComponentType: "button",
        accessibilityRole: "button"
      }, React.createElement(_reactNative.View, {
        style: styles.row,
        pointerEvents: "none"
      }, left ? left({
        color: expanded ? theme.colors.primary : descriptionColor
      }) : null, React.createElement(_reactNative.View, {
        style: [styles.item, styles.content]
      }, React.createElement(_Text.default, {
        numberOfLines: 1,
        style: [styles.title, {
          color: expanded ? theme.colors.primary : titleColor
        }]
      }, title), description && React.createElement(_Text.default, {
        numberOfLines: 2,
        style: [styles.description, {
          color: descriptionColor
        }]
      }, description)), React.createElement(_reactNative.View, {
        style: [styles.item, description && styles.multiline]
      }, React.createElement(_Icon.default, {
        source: expanded ? 'keyboard-arrow-up' : 'keyboard-arrow-down',
        color: titleColor,
        size: 24
      })))), expanded ? React.Children.map(children, function (child) {
        if (left && React.isValidElement(child) && !child.props.left && !child.props.right) {
          return React.cloneElement(child, {
            style: [styles.child, child.props.style]
          });
        }

        return child;
      }) : null);
    }
  }]);
  return ListAccordion;
}(React.Component);

(0, _defineProperty2.default)(ListAccordion, "displayName", 'List.Accordion');

var styles = _reactNative.StyleSheet.create({
  container: {
    padding: 8
  },
  row: {
    flexDirection: 'row',
    alignItems: 'center'
  },
  multiline: {
    height: 40,
    alignItems: 'center',
    justifyContent: 'center'
  },
  title: {
    fontSize: 16
  },
  description: {
    fontSize: 14
  },
  item: {
    margin: 8
  },
  child: {
    paddingLeft: 64
  },
  content: {
    flex: 1,
    justifyContent: 'center'
  }
});

var _default = (0, _theming.withTheme)(ListAccordion);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxpc3RBY2NvcmRpb24uanMiXSwibmFtZXMiOlsiTGlzdEFjY29yZGlvbiIsImV4cGFuZGVkIiwicHJvcHMiLCJvblByZXNzIiwidW5kZWZpbmVkIiwic2V0U3RhdGUiLCJzdGF0ZSIsImxlZnQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY2hpbGRyZW4iLCJ0aGVtZSIsInN0eWxlIiwidGl0bGVDb2xvciIsImNvbG9ycyIsInRleHQiLCJhbHBoYSIsInJnYiIsInN0cmluZyIsImRlc2NyaXB0aW9uQ29sb3IiLCJzdHlsZXMiLCJjb250YWluZXIiLCJfaGFuZGxlUHJlc3MiLCJyb3ciLCJjb2xvciIsInByaW1hcnkiLCJpdGVtIiwiY29udGVudCIsIm11bHRpbGluZSIsIlJlYWN0IiwiQ2hpbGRyZW4iLCJtYXAiLCJjaGlsZCIsImlzVmFsaWRFbGVtZW50IiwicmlnaHQiLCJjbG9uZUVsZW1lbnQiLCJDb21wb25lbnQiLCJTdHlsZVNoZWV0IiwiY3JlYXRlIiwicGFkZGluZyIsImZsZXhEaXJlY3Rpb24iLCJhbGlnbkl0ZW1zIiwiaGVpZ2h0IiwianVzdGlmeUNvbnRlbnQiLCJmb250U2l6ZSIsIm1hcmdpbiIsInBhZGRpbmdMZWZ0IiwiZmxleCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7SUE2Rk1BLGE7Ozs7Ozs7Ozs7Ozs7Ozt3RkFHSTtBQUNOQyxNQUFBQSxRQUFRLEVBQUUsTUFBS0MsS0FBTCxDQUFXRCxRQUFYLElBQXVCO0FBRDNCLEs7K0ZBSU8sWUFBTTtBQUNuQixZQUFLQyxLQUFMLENBQVdDLE9BQVgsSUFBc0IsTUFBS0QsS0FBTCxDQUFXQyxPQUFYLEVBQXRCOztBQUVBLFVBQUksTUFBS0QsS0FBTCxDQUFXRCxRQUFYLEtBQXdCRyxTQUE1QixFQUF1QztBQUdyQyxjQUFLQyxRQUFMLENBQWMsVUFBQUMsS0FBSztBQUFBLGlCQUFLO0FBQ3RCTCxZ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LFdBQVcsRUFBRTtBQURSLEdBdEJ3QjtBQXlCL0JuQixFQUFBQSxPQUFPLEVBQUU7QUFDUG9CLElBQUFBLElBQUksRUFBRSxDQURDO0FBRVBKLElBQUFBLGNBQWMsRUFBRTtBQUZUO0FBekJzQixDQUFsQixDQUFmOztlQStCZSx3QkFBVTNDLGFBQVYsQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmltcG9ydCBjb2xvciBmcm9tICdjb2xvcic7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBWaWV3LCBTdHlsZVNoZWV0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBUb3VjaGFibGVSaXBwbGUgZnJvbSAnLi4vVG91Y2hhYmxlUmlwcGxlJztcbmltcG9ydCBJY29uIGZyb20gJy4uL0ljb24nO1xuaW1wb3J0IFRleHQgZnJvbSAnLi4vVHlwb2dyYXBoeS9UZXh0JztcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJy4uLy4uL2NvcmUvdGhlbWluZyc7XG5pbXBvcnQgdHlwZSB7IFRoZW1lIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG50eXBlIFByb3BzID0ge3xcbiAgLyoqXG4gICAqIFRpdGxlIHRleHQgZm9yIHRoZSBsaXN0IGFjY29yZGlvbi5cbiAgICovXG4gIHRpdGxlOiBSZWFjdC5Ob2RlLFxuICAvKipcbiAgICogRGVzY3JpcHRpb24gdGV4dCBmb3IgdGhlIGxpc3QgYWNjb3JkaW9uLlxuICAgKi9cbiAgZGVzY3JpcHRpb24/OiBSZWFjdC5Ob2RlLFxuICAvKipcbiAgICogQ2FsbGJhY2sgd2hpY2ggcmV0dXJucyBhIFJlYWN0IGVsZW1lbnQgdG8gZGlzcGxheSBvbiB0aGUgbGVmdCBzaWRlLlxuICAgKi9cbiAgbGVmdD86IChwcm9wczogeyBjb2xvcjogc3RyaW5nIH0pID0+IFJlYWN0Lk5vZGUsXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBhY2NvcmRpb24gaXMgZXhwYW5kZWRcbiAgICogSWYgdGhpcyBwcm9wIGlzIHByb3ZpZGVkLCB0aGUgYWNjb3JkaW9uIHdpbGwgYmVoYXZlIGFzIGEgXCJjb250cm9sbGVkIGNvbXBvbmVudFwiLlxuICAgKiBZb3UnbGwgbmVlZCB0byB1cGRhdGUgdGhpcyBwcm9wIHdoZW4geW91IHdhbnQgdG8gdG9nZ2xlIHRoZSBjb21wb25lbnQgb3Igb24gYG9uUHJlc3NgLlxuICAgKi9cbiAgZXhwYW5kZWQ/OiBib29sZWFuLFxuICAvKipcbiAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBvbiBwcmVzcy5cbiAgICovXG4gIG9uUHJlc3M/OiAoKSA9PiBtaXhlZCxcbiAgLyoqXG4gICAqIENvbnRlbnQgb2YgdGhlIHNlY3Rpb24uXG4gICAqL1xuICBjaGlsZHJlbjogUmVhY3QuTm9kZSxcbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgdGhlbWU6IFRoZW1lLFxuICBzdHlsZT86IGFueSxcbnx9O1xuXG50eXBlIFN0YXRlID0ge1xuICBleHBhbmRlZDogYm9vbGVhbixcbn07XG5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCB0byBkaXNwbGF5IGFuIGV4cGFuZGFibGUgbGlzdCBpdGVtLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJzY3JlZW5zaG90c1wiPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMS5wbmdcIiAvPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMi5wbmdcIiAvPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMy5wbmdcIiAvPlxuICogPC9kaXY+XG4gKlxuICogIyMgVXNhZ2VcbiAqIGBgYGpzXG4gKiBpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG4gKiBpbXBvcnQgeyBMaXN0LCBDaGVja2JveCB9IGZyb20gJ3JlYWN0LW5hdGl2ZS1wYXBlcic7XG4gKlxuICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICogICBzdGF0ZSA9IHtcbiAqICAgICBleHBhbmRlZDogdHJ1ZVxuICogICB9XG4gKlxuICogICBfaGFuZGxlUHJlc3MgPSAoKSA9PlxuICogICAgIHRoaXMuc2V0U3RhdGUoe1xuICogICAgICAgZXhwYW5kZWQ6ICF0aGlzLnN0YXRlLmV4cGFuZGVkXG4gKiAgICAgfSk7XG4gKlxuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxMaXN0LlNlY3Rpb24gdGl0bGU9XCJBY2NvcmRpb25zXCI+XG4gKiAgICAgICAgIDxMaXN0LkFjY29yZGlvblxuICogICAgICAgICAgIHRpdGxlPVwiVW5jb250cm9sbGVkIEFjY29yZGlvblwiXG4gKiAgICAgICAgICAgbGVmdD17cHJvcHMgPT4gPExpc3QuSWNvbiB7Li4ucHJvcHN9IGljb249XCJmb2xkZXJcIiAvPn1cbiAqICAgICAgICAgPlxuICogICAgICAgICAgIDxMaXN0Lkl0ZW0gdGl0bGU9XCJGaXJzdCBpdGVtXCIgLz5cbiAqICAgICAgICAgICA8TGlzdC5JdGVtIHRpdGxlPVwiU2Vjb25kIGl0ZW1cIiAvPlxuICogICAgICAgICA8L0xpc3QuQWNjb3JkaW9uPlxuICpcbiAqICAgICAgICAgPExpc3QuQWNjb3JkaW9uXG4gKiAgICAgICAgICAgdGl0bGU9XCJDb250cm9sbGVkIEFjY29yZGlvblwiXG4gKiAgICAgICAgICAgbGVmdD17cHJvcHMgPT4gPExpc3QuSWNvbiB7Li4ucHJvcHN9IGljb249XCJmb2xkZXJcIiAvPn1cbiAqICAgICAgICAgICBleHBhbmRlZD17dGhpcy5zdGF0ZS5leHBhbmRlZH1cbiAqICAgICAgICAgICBvblByZXNzPXt0aGlzLl9oYW5kbGVQcmVzc31cbiAqICAgICAgICAgPlxuICogICAgICAgICAgIDxMaXN0Lkl0ZW0gdGl0bGU9XCJGaXJzdCBpdGVtXCIgLz5cbiAqICAgICAgICAgICA8TGlzdC5JdGVtIHRpdGxlPVwiU2Vjb25kIGl0ZW1cIiAvPlxuICogICAgICAgICA8L0xpc3QuQWNjb3JkaW9uPlxuICogICAgICAgPC9MaXN0LlNlY3Rpb24+XG4gKiAgICAgKTtcbiAqICAgfVxuICogfVxuICpcbiAqIGV4cG9ydCBkZWZhdWx0IE15Q29tcG9uZW50O1xuICogYGBgXG4gKi9cbmNsYXNzIExpc3RBY2NvcmRpb24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHN0YXRpYyBkaXNwbGF5TmFtZSA9ICdMaXN0LkFjY29yZGlvbic7XG5cbiAgc3RhdGUgPSB7XG4gICAgZXhwYW5kZWQ6IHRoaXMucHJvcHMuZXhwYW5kZWQgfHwgZmFsc2UsXG4gIH07XG5cbiAgX2hhbmRsZVByZXNzID0gKCkgPT4ge1xuICAgIHRoaXMucHJvcHMub25QcmVzcyAmJiB0aGlzLnByb3BzLm9uUHJlc3MoKTtcblxuICAgIGlmICh0aGlzLnByb3BzLmV4cGFuZGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIE9ubHkgdXBkYXRlIHN0YXRlIG9mIHRoZSBgZXhwYW5kZWRgIHByb3Agd2FzIG5vdCBwYXNzZWRcbiAgICAgIC8vIElmIGl0IHdhcyBwYXNzZWQsIHRoZSBjb21wb25lbnQgd2lsbCBhY3QgYXMgYSBjb250cm9sbGVkIGNvbXBvbmVudFxuICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICBleHBhbmRlZDogIXN0YXRlLmV4cGFuZGVkLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBsZWZ0LCB0aXRsZSwgZGVzY3JpcHRpb24sIGNoaWxkcmVuLCB0aGVtZSwgc3R5bGUgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgdGl0bGVDb2xvciA9IGNvbG9yKHRoZW1lLmNvbG9ycy50ZXh0KVxuICAgICAgLmFscGhhKDAuODcpXG4gICAgICAucmdiKClcbiAgICAgIC5zdHJpbmcoKTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbkNvbG9yID0gY29sb3IodGhlbWUuY29sb3JzLnRleHQpXG4gICAgICAuYWxwaGEoMC41NClcbiAgICAgIC5yZ2IoKVxuICAgICAgLnN0cmluZygpO1xuXG4gICAgY29uc3QgZXhwYW5kZWQgPVxuICAgICAgdGhpcy5wcm9wcy5leHBhbmRlZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gdGhpcy5wcm9wcy5leHBhbmRlZFxuICAgICAgICA6IHRoaXMuc3RhdGUuZXhwYW5kZWQ7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXc+XG4gICAgICAgIDxUb3VjaGFibGVSaXBwbGVcbiAgICAgICAgICBzdHlsZT17W3N0eWxlcy5jb250YWluZXIsIHN0eWxlXX1cbiAgICAgICAgICBvblByZXNzPXt0aGlzLl9oYW5kbGVQcmVzc31cbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5VHJhaXRzPVwiYnV0dG9uXCJcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgYWNjZXNzaWJpbGl0eVJvbGU9XCJidXR0b25cIlxuICAgICAgICA+XG4gICAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5yb3d9IHBvaW50ZXJFdmVudHM9XCJub25lXCI+XG4gICAgICAgICAgICB7bGVmdFxuICAgICAgICAgICAgICA/IGxlZnQoe1xuICAgICAgICAgICAgICAgICAgY29sb3I6IGV4cGFuZGVkID8gdGhlbWUuY29sb3JzLnByaW1hcnkgOiBkZXNjcmlwdGlvbkNvbG9yLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLml0ZW0sIHN0eWxlcy5jb250ZW50XX0+XG4gICAgICAgICAgICAgIDxUZXh0XG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZMaW5lcz17MX1cbiAgICAgICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICAgICAgc3R5bGVzLnRpdGxlLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogZXhwYW5kZWQgPyB0aGVtZS5jb2xvcnMucHJpbWFyeSA6IHRpdGxlQ29sb3IsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7dGl0bGV9XG4gICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAge2Rlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZMaW5lcz17Mn1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBkZXNjcmlwdGlvbkNvbG9yLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7ZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICAgPFZpZXcgc3R5bGU9e1tzdHlsZXMuaXRlbSwgZGVzY3JpcHRpb24gJiYgc3R5bGVzLm11bHRpbGluZV19PlxuICAgICAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgICAgIHNvdXJjZT17ZXhwYW5kZWQgPyAna2V5Ym9hcmQtYXJyb3ctdXAnIDogJ2tleWJvYXJkLWFycm93LWRvd24nfVxuICAgICAgICAgICAgICAgIGNvbG9yPXt0aXRsZUNvbG9yfVxuICAgICAgICAgICAgICAgIHNpemU9ezI0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgPC9Ub3VjaGFibGVSaXBwbGU+XG4gICAgICAgIHtleHBhbmRlZFxuICAgICAgICAgID8gUmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCBjaGlsZCA9PiB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBsZWZ0ICYmXG4gICAgICAgICAgICAgICAgUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpICYmXG4gICAgICAgICAgICAgICAgIWNoaWxkLnByb3BzLmxlZnQgJiZcbiAgICAgICAgICAgICAgICAhY2hpbGQucHJvcHMucmlnaHRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNsb25lRWxlbWVudChjaGlsZCwge1xuICAgICAgICAgICAgICAgICAgc3R5bGU6IFtzdHlsZXMuY2hpbGQsIGNoaWxkLnByb3BzLnN0eWxlXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiBudWxsfVxuICAgICAgPC9WaWV3PlxuICAgICk7XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBjb250YWluZXI6IHtcbiAgICBwYWRkaW5nOiA4LFxuICB9LFxuICByb3c6IHtcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgfSxcbiAgbXVsdGlsaW5lOiB7XG4gICAgaGVpZ2h0OiA0MCxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIH0sXG4gIHRpdGxlOiB7XG4gICAgZm9udFNpemU6IDE2LFxuICB9LFxuICBkZXNjcmlwdGlvbjoge1xuICAgIGZvbnRTaXplOiAxNCxcbiAgfSxcbiAgaXRlbToge1xuICAgIG1hcmdpbjogOCxcbiAgfSxcbiAgY2hpbGQ6IHtcbiAgICBwYWRkaW5nTGVmdDogNjQsXG4gIH0sXG4gIGNvbnRlbnQ6IHtcbiAgICBmbGV4OiAxLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB3aXRoVGhlbWUoTGlzdEFjY29yZGlvbik7XG4iXX0=